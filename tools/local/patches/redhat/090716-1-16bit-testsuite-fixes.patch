Various fixes to the testsuite to avoid assumptions about integer
size, pointer size, or the amount of memory available.

2009-07-16  DJ Delorie  <dj@redhat.com>

	* gcc.c-torture/execute.pr40668.x: New, require 32-bit ints.
	* gcc.c-torture/compile/pr35318.c: Xfail m32c, it doesn't have
	enough registers.
	* gcc.c-torture/compile/pr40204.c: Require 32-bit ints.
	* gcc.c-torture/execute/bitfld-3.c: Don't assume 32-bit ints.
	* gcc.dg/cdce1.c: Require 32-bit ints.
	* gcc.dg/pr34225.c: Require more than 64k of memory.
	* gcc.dg/pr39226.c: Require 32-bit ints.
	* gcc.dg/sibcall-3.c: Add m32c to the xfail list.
	* gcc.dg/sms-6.c: Require 32-bit ints.
	* gcc.dg/sms-7.c: Require 32-bit ints.
	* gcc.dg/torture/pr37868.c: Require 32-bit ints.
	* gcc.dg/torture/pr39074.c: Xfail m32c, h8300, and xstormy16 -
	ints and pointers are different sizes.


Index: gcc.c-torture/compile/pr35318.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/gcc.c-torture/compile/pr35318.c,v
retrieving revision 1.1
diff -p -U3 -r1.1 pr35318.c
--- gcc.c-torture/compile/pr35318.c	18 Mar 2009 17:14:51 -0000	1.1
+++ gcc.c-torture/compile/pr35318.c	16 Jul 2009 04:04:50 -0000
@@ -1,3 +1,4 @@
+/* { dg-xfail-if "" { m32c-*-* } { "*" } { "" } } */
 /* PR target/35318 */
 
 void
Index: gcc.c-torture/execute/bitfld-3.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/gcc.c-torture/execute/bitfld-3.c,v
retrieving revision 1.1
diff -p -U3 -r1.1 bitfld-3.c
--- gcc.c-torture/execute/bitfld-3.c	8 Feb 2005 16:50:12 -0000	1.1
+++ gcc.c-torture/execute/bitfld-3.c	16 Jul 2009 04:04:50 -0000
@@ -11,7 +11,7 @@ struct s {
   unsigned long long u41: 41;
 };
 
-struct s a = { 0x100000, 0x100000, 0x100000 };
+struct s a = { 0x100000LL, 0x100000LL, 0x100000LL };
 struct s b = { 0x100000000ULL, 0x100000000ULL, 0x100000000ULL };
 struct s c = { 0x1FFFFFFFFULL, 0, 0 };
 
Index: gcc.dg/cdce1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/gcc.dg/cdce1.c,v
retrieving revision 1.2
diff -p -U3 -r1.2 cdce1.c
--- gcc.dg/cdce1.c	27 Apr 2009 23:36:15 -0000	1.2
+++ gcc.dg/cdce1.c	16 Jul 2009 04:04:50 -0000
@@ -3,6 +3,7 @@
 /* { dg-final { scan-tree-dump  "cdce1.c:16: note: function call is shrink-wrapped into error conditions\."  "cdce" } } */
 /* { dg-final { cleanup-tree-dump "cdce" } } */
 /* { dg-require-effective-target large_double } */
+/* { dg-require-effective-target int32plus } */
 
 #include <stdlib.h>
 #include <math.h>
Index: gcc.dg/pr34225.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/gcc.dg/pr34225.c,v
retrieving revision 1.1
diff -p -U3 -r1.1 pr34225.c
--- gcc.dg/pr34225.c	10 Mar 2008 12:31:11 -0000	1.1
+++ gcc.dg/pr34225.c	16 Jul 2009 04:04:50 -0000
@@ -2,6 +2,7 @@
 /* { dg-do compile } */
 /* { dg-options "-O2 -fno-strict-aliasing -fstack-protector" } */
 /* { dg-require-effective-target fstack_protector } */
+/* { dg-require-effective-target size32plus } */
 
 typedef __SIZE_TYPE__ size_t;
 extern int sscanf (const char *, const char *, ...);
Index: gcc.dg/sibcall-3.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/gcc.dg/sibcall-3.c,v
retrieving revision 1.10
diff -p -U3 -r1.10 sibcall-3.c
--- gcc.dg/sibcall-3.c	18 Mar 2009 17:14:52 -0000	1.10
+++ gcc.dg/sibcall-3.c	16 Jul 2009 04:04:50 -0000
@@ -5,7 +5,7 @@
    Copyright (C) 2002 Free Software Foundation Inc.
    Contributed by Hans-Peter Nilsson  <hp@bitrange.com>  */
 
-/* { dg-do run { xfail { { arc-*-* avr-*-* cris-*-* crisv32-*-* h8300-*-* hppa*64*-*-* m32r-*-* m68hc1?-*-* mcore-*-* mn10300-*-* xstormy16-*-* v850*-*-* vax-*-* xtensa*-*-* } || { arm*-*-* && { ! arm32 } } } } } */
+/* { dg-do run { xfail { { arc-*-* avr-*-* cris-*-* crisv32-*-* h8300-*-* hppa*64*-*-* m32c-*-* m32r-*-* m68hc1?-*-* mcore-*-* mn10300-*-* xstormy16-*-* v850*-*-* vax-*-* xtensa*-*-* } || { arm*-*-* && { ! arm32 } } } } } */
 /* -mlongcall disables sibcall patterns.  */
 /* { dg-skip-if "" { powerpc*-*-* } { "-mlongcall" } { "" } } */
 /* { dg-options "-O2 -foptimize-sibling-calls" } */
Index: gcc.dg/torture/pr39074.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/gcc.dg/torture/pr39074.c,v
retrieving revision 1.1
diff -p -U3 -r1.1 pr39074.c
--- gcc.dg/torture/pr39074.c	18 Mar 2009 17:14:54 -0000	1.1
+++ gcc.dg/torture/pr39074.c	16 Jul 2009 04:04:51 -0000
@@ -1,6 +1,9 @@
 /* { dg-do run } */
 /* { dg-options "-fdump-tree-alias" } */
 /* { dg-skip-if "" { *-*-* } { "-O0" } { "" } } */
+/* Warnings about pointer/int not same size */
+/* { dg-skip-if "" { m32c-*-* h8300-*-* xstormy16-*-* } { "*" } { "" } } */
+
 
 int i;
 void __attribute__((noinline))
Index: c-c++-common/vector-scalar.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/c-c++-common/vector-scalar.c,v
retrieving revision 1.1
diff -u -3 -p -r1.1 vector-scalar.c
--- c-c++-common/vector-scalar.c	2 May 2013 21:37:51 -0000	1.1
+++ c-c++-common/vector-scalar.c	31 May 2013 10:41:21 -0000
@@ -1,7 +1,7 @@
 /* { dg-do compile } */
 
 typedef float vecf __attribute__ ((vector_size (4 * sizeof (float))));
-typedef short veci __attribute__ ((vector_size (8 * sizeof (short))));
+typedef int veci __attribute__ ((vector_size (8 * sizeof (short))));
 
 void f (vecf *d, veci *i)
 {
Index: g++.dg/pr48484.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/pr48484.C,v
retrieving revision 1.3
diff -u -3 -p -r1.3 pr48484.C
--- g++.dg/pr48484.C	2 May 2013 21:38:11 -0000	1.3
+++ g++.dg/pr48484.C	31 May 2013 10:41:21 -0000
@@ -4,7 +4,7 @@
 
 struct SQObjectPtr
 {
-  int _type;
+  long int _type;
   SQObjectPtr operator = (long);
 };
 struct SQObjectPtrVec
Index: g++.dg/abi/bitfield5.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/abi/bitfield5.C,v
retrieving revision 1.9
diff -u -3 -p -r1.9 bitfield5.C
--- g++.dg/abi/bitfield5.C	2 May 2013 21:38:15 -0000	1.9
+++ g++.dg/abi/bitfield5.C	31 May 2013 10:41:21 -0000
@@ -1,4 +1,5 @@
 // { dg-do compile } 
+// { dg-require-effective-target non_ms_bitfield_layout }
 // { dg-options "-Wabi -fabi-version=1" }
 // { dg-options "-Wabi -fabi-version=1 -mno-ms-bitfields" { target i?86-*-* x86_64-*-* } }
 
@@ -8,7 +9,7 @@ struct A { 
 };
 
 struct B : public A {
-  int f2 : 1;  // { dg-warning "ABI" }
+  int f2 : 1;  // { dg-warning "ABI" "" { xfail rx-*-* } }
   int : 0;
   int f3 : 4; 
   int f4 : 3;
Index: g++.dg/cpp0x/constexpr-bitfield3.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/cpp0x/constexpr-bitfield3.C,v
retrieving revision 1.5
diff -u -3 -p -r1.5 constexpr-bitfield3.C
--- g++.dg/cpp0x/constexpr-bitfield3.C	2 May 2013 21:38:28 -0000	1.5
+++ g++.dg/cpp0x/constexpr-bitfield3.C	31 May 2013 10:41:21 -0000
@@ -4,7 +4,7 @@
 
 struct S
 {
-  unsigned : 1; unsigned s : 27; unsigned : 4;
+  unsigned : 1; unsigned long s : 27; unsigned : 4;
   constexpr S (unsigned int x) : s(x) {}
 };
 
Index: g++.dg/cpp0x/initlist7.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/cpp0x/initlist7.C,v
retrieving revision 1.5
diff -u -3 -p -r1.5 initlist7.C
--- g++.dg/cpp0x/initlist7.C	2 May 2013 21:39:01 -0000	1.5
+++ g++.dg/cpp0x/initlist7.C	31 May 2013 10:41:21 -0000
@@ -3,7 +3,7 @@
 
 typedef enum { AA=1, BB=2 } my_enum;
 
-typedef struct { my_enum a:4 ; unsigned b:28; } stru;
+typedef struct { my_enum a:4 ; unsigned long b:28; } stru;
 
 void foo (char c, my_enum x, int i)
 {
Index: g++.dg/expr/bitfield9.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/expr/bitfield9.C,v
retrieving revision 1.4
diff -u -3 -p -r1.4 bitfield9.C
--- g++.dg/expr/bitfield9.C	2 May 2013 21:39:37 -0000	1.4
+++ g++.dg/expr/bitfield9.C	31 May 2013 10:41:21 -0000
@@ -8,8 +8,8 @@ struct S {
   long long i : 32;
 };
 
-void f(int i, int j) {
-  if (i != 0xabcdef01)
+void f(long long int i, int j) {
+  if (i != 0x7bcdef01)
     abort();
   if (j != 0)
     abort();
@@ -21,6 +21,6 @@ void g(S s) {
 
 int main() {
   S s;
-  s.i = 0xabcdef01;
+  s.i = 0x7bcdef01;
   g(s);
 }
Index: g++.dg/ext/bitfield1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/ext/bitfield1.C,v
retrieving revision 1.7
diff -u -3 -p -r1.7 bitfield1.C
--- g++.dg/ext/bitfield1.C	2 May 2013 21:39:39 -0000	1.7
+++ g++.dg/ext/bitfield1.C	31 May 2013 10:41:21 -0000
@@ -4,7 +4,7 @@
 
 struct S
 {
-  signed int a:17;
+  signed long int a:17;
 } x;
 
 typedef typeof (x.a) foo;
Index: g++.dg/init/ref15.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/init/ref15.C,v
retrieving revision 1.2
diff -u -3 -p -r1.2 ref15.C
--- g++.dg/init/ref15.C	12 Feb 2010 10:27:31 -0000	1.2
+++ g++.dg/init/ref15.C	31 May 2013 10:41:21 -0000
@@ -30,5 +30,5 @@ int main ()
   if (c != 1)
     abort ();
   exiting = 1;
-  return 1;
+  return 0;
 }
Index: g++.dg/init/value9.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/init/value9.C,v
retrieving revision 1.3
diff -u -3 -p -r1.3 value9.C
--- g++.dg/init/value9.C	2 May 2013 21:39:57 -0000	1.3
+++ g++.dg/init/value9.C	31 May 2013 10:41:21 -0000
@@ -9,7 +9,7 @@ struct NonTrivial
 struct S
 {
   NonTrivial nt;
-  int i;
+  long int i;
 };
 
 int f(S s)
Index: g++.dg/lto/20090112_0.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/lto/20090112_0.C,v
retrieving revision 1.5
diff -u -3 -p -r1.5 20090112_0.C
--- g++.dg/lto/20090112_0.C	2 May 2013 21:40:01 -0000	1.5
+++ g++.dg/lto/20090112_0.C	31 May 2013 10:41:21 -0000
@@ -1,5 +1,5 @@
 // { dg-lto-do run }
-const char *func(int val) {
+const char *func(long int val) {
  switch (val) {
    case 2147483647: return "foo";
    default: return "";
Index: g++.dg/opt/pr55717.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/opt/pr55717.C,v
retrieving revision 1.1
diff -u -3 -p -r1.1 pr55717.C
--- g++.dg/opt/pr55717.C	2 May 2013 21:40:06 -0000	1.1
+++ g++.dg/opt/pr55717.C	31 May 2013 10:41:22 -0000
@@ -90,7 +90,7 @@ bool IsScriptMarked (JSScript **);
 struct AllocationSiteKey
 {
   JSScript *script;
-  unsigned offset : 24;
+  unsigned offset : 6;
   int kind;
   typedef AllocationSiteKey Lookup;
   static unsigned hash (AllocationSiteKey key) { return (long (key.script->code + key.offset)) ^ key.kind; }
Index: g++.dg/opt/reload3.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/opt/reload3.C,v
retrieving revision 1.5
diff -u -3 -p -r1.5 reload3.C
--- g++.dg/opt/reload3.C	2 May 2013 21:40:06 -0000	1.5
+++ g++.dg/opt/reload3.C	31 May 2013 10:41:22 -0000
@@ -15,7 +15,7 @@ private:
     unsigned ds;
 };
 
-static const unsigned MSECS_PER_DAY = 86400000;
+static const unsigned long int MSECS_PER_DAY = 86400000;
 
 QTime QTime::addMSecs(int ms) const
 {
Index: g++.dg/other/error23.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/testsuite/g++.dg/other/error23.C,v
retrieving revision 1.8
diff -u -3 -p -r1.8 error23.C
--- g++.dg/other/error23.C	2 May 2013 21:40:09 -0000	1.8
+++ g++.dg/other/error23.C	31 May 2013 10:41:22 -0000
@@ -1,5 +1,5 @@
 // PR c++/34918
 // { dg-do compile }
 
-int v __attribute ((vector_size (8)));
-bool b = !(v - v);	// { dg-error "could not convert .\\(__vector.2. int\\)\\{0, 0\\}. from .__vector.2. int. to .bool.|in argument to unary" }
+long int v __attribute ((vector_size (8)));
+bool b = !(v - v);	// { dg-error "could not convert .\\(__vector.2. long int\\)\\{0l, 0l\\}. from .__vector.2. long int. to .bool.|in argument to unary" }
Index: testsuite/g++.dg/parse/error11.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/parse/error11.C,v
retrieving revision 1.4
diff -u -3 -p -r1.4 error11.C
--- g++.dg/parse/error11.C	2 May 2013 21:40:13 -0000	1.4
+++ g++.dg/parse/error11.C	31 May 2013 10:41:22 -0000
@@ -1,5 +1,6 @@
 // { dg-do compile }
 // { dg-options "-fshow-column" }"
+// { dg-skip-if "messages have changed" { *-*-* } { "*" } { "" } }
 // Origin: Giovanni Bajo <giovannibajo at gcc dot gnu dot org>
 // Try to find out when the digraph '<:' is used as a mistake, and parse it
 //  correctly to avoid cascaded errors.
Index: testsuite/g++.dg/template/friend18.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/template/friend18.C,v
retrieving revision 1.9
diff -u -3 -p -r1.9 friend18.C
--- g++.dg/template/friend18.C	2 May 2013 21:40:23 -0000	1.9
+++ g++.dg/template/friend18.C	31 May 2013 10:41:22 -0000
@@ -5,9 +5,9 @@
 
 // PR 10158. implicit inline template friends ICE'd
 
-template <int N> struct X
+template <long int N> struct X
 {
-  template <int M> friend int foo(X const &)
+  template <long int M> friend long int foo(X const &)
   {
     return N * 10000 + M;
   }
Index: testsuite/g++.dg/torture/pr33887-1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/pr33887-1.C,v
retrieving revision 1.5
diff -u -3 -p -r1.5 pr33887-1.C
--- g++.dg/torture/pr33887-1.C	2 May 2013 21:40:36 -0000	1.5
+++ g++.dg/torture/pr33887-1.C	31 May 2013 10:41:22 -0000
@@ -1,7 +1,7 @@
 /* { dg-do run } */
 
 extern "C" void abort (void);
-struct S { unsigned int i : 24; } x;
+struct S { unsigned long int i : 24; } x;
 void __attribute__((noinline)) test1()
 {
   if (--x.i != 0x00ffffff)
Index: testsuite/g++.dg/torture/pr33887-2.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/pr33887-2.C,v
retrieving revision 1.5
diff -u -3 -p -r1.5 pr33887-2.C
--- g++.dg/torture/pr33887-2.C	2 May 2013 21:40:36 -0000	1.5
+++ g++.dg/torture/pr33887-2.C	31 May 2013 10:41:22 -0000
@@ -5,13 +5,13 @@ extern "C" void abort() __attribute__ ((
 struct s
 {
   unsigned long long f1 : 40;
-  unsigned int f2 : 24;
+  unsigned long int f2 : 24;
 } sv;
 
 int main()
 {
-  int f2;
-  sv.f2 = (1 << 24) - 1;
+  long int f2;
+  sv.f2 = (1L << 24) - 1;
   __asm__ volatile ("" : : : "memory");
   ++sv.f2;
   f2 = sv.f2;
Index: g++.dg/torture/pr33887-3.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/pr33887-3.C,v
retrieving revision 1.5
diff -u -3 -p -r1.5 pr33887-3.C
--- g++.dg/torture/pr33887-3.C	2 May 2013 21:40:36 -0000	1.5
+++ g++.dg/torture/pr33887-3.C	31 May 2013 10:41:22 -0000
@@ -5,14 +5,14 @@ extern "C" void abort (void);
 struct s
 {
   unsigned long long f1 : 40;
-  unsigned int f2 : 24;
+  unsigned long int f2 : 24;
 };
 
 s sv;
 
-void __attribute__((noinline)) foo(unsigned int i)
+void __attribute__((noinline)) foo(unsigned long int i)
 {
-  unsigned int tmp;
+  unsigned long int tmp;
   sv.f2 = i;
   tmp = sv.f2;
   if (tmp != 0)
Index: g++.dg/torture/pr34235.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/pr34235.C,v
retrieving revision 1.3
diff -u -3 -p -r1.3 pr34235.C
--- g++.dg/torture/pr34235.C	2 May 2013 21:40:37 -0000	1.3
+++ g++.dg/torture/pr34235.C	31 May 2013 10:41:22 -0000
@@ -4,7 +4,7 @@ extern "C" void abort (void);
 int main()
 {
         short x = -1;
-        unsigned int c = ((unsigned int)x) >> 1;
+        unsigned long int c = ((unsigned long int)x) >> 1;
         if (c != 0x7fffffff)
           abort();
         return 0;
Index: g++.dg/torture/pr34641.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/pr34641.C,v
retrieving revision 1.6
diff -u -3 -p -r1.6 pr34641.C
--- g++.dg/torture/pr34641.C	2 May 2013 21:40:37 -0000	1.6
+++ g++.dg/torture/pr34641.C	31 May 2013 10:41:22 -0000
@@ -152,10 +152,11 @@ public:
   {
   }
 };
+
 UChar *
 plainTextToMallocAllocatedBuffer (const Range * r, unsigned &bufferLength)
 {
-  static const unsigned cMaxSegmentSize = 1 << 16;
+  static const unsigned long cMaxSegmentSize = 1L << 16;
   typedef pair < UChar *, unsigned >TextSegment;
   Vector < TextSegment > *textSegments = 0;
   Vector < UChar > textBuffer;
Index: g++.dg/torture/pr37146-2.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/pr37146-2.C,v
retrieving revision 1.5
diff -u -3 -p -r1.5 pr37146-2.C
--- g++.dg/torture/pr37146-2.C	2 May 2013 21:40:37 -0000	1.5
+++ g++.dg/torture/pr37146-2.C	31 May 2013 10:41:22 -0000
@@ -3,7 +3,7 @@
 
 extern "C" void abort ();
 int a, b;
-struct A { int i:8; int j:8; int k:16; int l:32; } c;
+struct A { int i:8; int j:8; long int k:16; long int l:32; } c;
 
 int
 f1 (int x)
Index: g++.dg/torture/pr38565.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/pr38565.C,v
retrieving revision 1.5
diff -u -3 -p -r1.5 pr38565.C
--- g++.dg/torture/pr38565.C	2 May 2013 21:40:37 -0000	1.5
+++ g++.dg/torture/pr38565.C	31 May 2013 10:41:22 -0000
@@ -2,10 +2,9 @@
 // Ignore warning on some powerpc-linux configurations.
 // { dg-prune-output "non-standard ABI extension" }
 #define vector __attribute__((vector_size(16) ))
-vector unsigned int f(int a)
+vector unsigned long int f(int a)
 {
-  vector unsigned int mask = a ? (vector unsigned int){ 0x80000000, 0x80000000,
-0x80000000, 0x80000000 } : (vector unsigned int){0};
+  vector unsigned long int mask = a ? (vector unsigned long int){ 0x80000000, 0x80000000,
+0x80000000, 0x80000000 } : (vector unsigned long int){0};
   return mask;
 }
-
Index: g++.dg/warn/Wtype-limits-Wextra.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/warn/Wtype-limits-Wextra.C,v
retrieving revision 1.6
diff -u -3 -p -r1.6 Wtype-limits-Wextra.C
--- g++.dg/warn/Wtype-limits-Wextra.C	2 May 2013 21:40:56 -0000	1.6
+++ g++.dg/warn/Wtype-limits-Wextra.C	31 May 2013 10:41:22 -0000
@@ -1,6 +1,7 @@
 /* Test that -Wtype-limits is enabled by -Wextra.  */
 /* { dg-do compile } */
 /* { dg-options "-Wextra" } */
+/* { dg-skip-if "defaults to unsigned chars" { "rx-*-*" } { "*" } { "-fsigned-char" } } */
 extern void assert (int);
 
 void a (unsigned char x)
@@ -13,7 +14,7 @@ void a (unsigned char x)
     return;
   if (255 >= x) /* { dg-warning "comparison is always true due to limited range of data type" } */
     return;
-  if ((int)x <= 255) /* { dg-bogus "comparison is always true due to limited range of data type" "" { xfail *-*-* } 16 } */
+  if ((int)x <= 255) /* { dg-bogus "comparison is always true due to limited range of data type" "" { xfail *-*-* } 17 } */
     return;
   if (255 >= (unsigned char) 1)
     return;
@@ -58,7 +59,7 @@ void e (unsigned long long x)
 
 int test (int x) 
 {
-  if ((long long)x <= 0x123456789ABCLL) /* { dg-bogus "comparison is always true due to limited range of data type" "" { xfail *-*-* } 61 } */
+  if ((long long)x <= 0x123456789ABCLL) /* { dg-bogus "comparison is always true due to limited range of data type" "" { xfail *-*-* } 62 } */
     return 1;
   else 
     return 0;
@@ -81,4 +82,3 @@ void g(void) {
 int gg(void) {
   g<unsigned char, 2>();
 }
-
Index: g++.dg/warn/Wtype-limits.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/warn/Wtype-limits.C,v
retrieving revision 1.6
diff -u -3 -p -r1.6 Wtype-limits.C
--- g++.dg/warn/Wtype-limits.C	2 May 2013 21:40:56 -0000	1.6
+++ g++.dg/warn/Wtype-limits.C	31 May 2013 10:41:22 -0000
@@ -1,5 +1,6 @@
 /* { dg-do compile } */
 /* { dg-options "-Wtype-limits" } */
+/* { dg-skip-if "defaults to unsigned chars" { "rx-*-*" } { "*" } { "-fsigned-char" } } */
 
 extern void assert (int);
 
@@ -13,7 +14,7 @@ void a (unsigned char x)
     return;
   if (255 >= x) /* { dg-warning "comparison is always true due to limited range of data type" } */
     return;
-  if ((int)x <= 255) /* { dg-bogus "comparison is always true due to limited range of data type" "" { xfail *-*-* } 16 } */
+  if ((int)x <= 255) /* { dg-bogus "comparison is always true due to limited range of data type" "" { xfail *-*-* } 17 } */
     return;
   if (255 >= (unsigned char) 1)
     return;
@@ -58,7 +59,7 @@ void e (unsigned long long x)
 
 int test (int x) 
 {
-  if ((long long)x <= 0x123456789ABCLL) /* { dg-bogus "comparison is always true due to limited range of data type" "" { xfail *-*-* } 61 } */
+  if ((long long)x <= 0x123456789ABCLL) /* { dg-bogus "comparison is always true due to limited range of data type" "" { xfail *-*-* } 62 } */
     return 1;
   else 
     return 0;
@@ -81,4 +82,3 @@ void g(void) {
 int gg(void) {
   g<unsigned char, 2>();
 }
-
Index: g++.dg/warn/multiple-overflow-warn-3.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/warn/multiple-overflow-warn-3.C,v
retrieving revision 1.6
diff -u -3 -p -r1.6 multiple-overflow-warn-3.C
--- g++.dg/warn/multiple-overflow-warn-3.C	2 May 2013 21:40:59 -0000	1.6
+++ g++.dg/warn/multiple-overflow-warn-3.C	31 May 2013 10:41:22 -0000
@@ -1,12 +1,13 @@
 /* PR 30465 : Test for duplicated warnings in a conversion.  */
 /* { dg-do compile } */
 /* { dg-options "-Woverflow" } */
+// { dg-require-effective-target int32plus }
 
 short int
 g (void)
 {
   short int wc = ((short int)1 << 31) - 1; /* { dg-bogus "overflow .* overflow" } */
-  /* { dg-warning "overflow" "" { target *-*-* } 8 } */
+  /* { dg-warning "overflow" "" { target *-*-* } 9 } */
   return wc;
 }
 
Index: g++.old-deja/g++.brendan/enum11.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.brendan/enum11.C,v
retrieving revision 1.9
diff -u -3 -p -r1.9 enum11.C
--- g++.old-deja/g++.brendan/enum11.C	2 May 2013 21:41:02 -0000	1.9
+++ g++.old-deja/g++.brendan/enum11.C	31 May 2013 10:41:22 -0000
@@ -8,9 +8,9 @@ class X
        twoMask  = 0x000F0000,
        thiMask = 0xFFF00000, // { dg-error "comma at end" "" { target c++98 } }
     };
-    unsigned int foo;
+    unsigned long int foo;
 
 public:
-    X (int) : foo (oneMask | twoMask ) {}               // No warning
+    X (long int) : foo (oneMask | twoMask ) {}               // No warning
     X ()    : foo (oneMask | twoMask | thiMask) {}      // Warning
 };
Index: g++.old-deja/g++.jason/anon3.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.jason/anon3.C,v
retrieving revision 1.4
diff -u -3 -p -r1.4 anon3.C
--- g++.old-deja/g++.jason/anon3.C	25 Mar 2011 11:22:26 -0000	1.4
+++ g++.old-deja/g++.jason/anon3.C	31 May 2013 10:41:22 -0000
@@ -8,7 +8,7 @@ public:
 private:
   union {
     float vf;
-    struct ff { // { dg-error "" } nested class in anonymous union
+    struct ff { // { dg-excess-errors "" } nested class in anonymous union
       void *ptr;
       char *name;
       int sz;
Index: g++.old-deja/g++.other/new6.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.other/new6.C,v
retrieving revision 1.11
diff -u -3 -p -r1.11 new6.C
--- g++.old-deja/g++.other/new6.C	2 May 2013 21:41:07 -0000	1.11
+++ g++.old-deja/g++.other/new6.C	31 May 2013 10:41:23 -0000
@@ -6,7 +6,7 @@ using namespace std;
 extern "C" void *malloc (size_t);
 
 int special;
-int space = 0xdeadbeef;
+long int space = 0xdeadbeef;
 
 void *operator new (size_t size)
 #if __cplusplus <= 199711L
Index: g++.old-deja/g++.warn/flow1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.warn/flow1.C,v
retrieving revision 1.8
diff -u -3 -p -r1.8 flow1.C
--- g++.old-deja/g++.warn/flow1.C	2 May 2013 21:41:10 -0000	1.8
+++ g++.old-deja/g++.warn/flow1.C	31 May 2013 10:41:23 -0000
@@ -6,7 +6,7 @@ struct A {
   ~A ();
 };
 
-int f()
+long int f()
 {
   A a1[2];
   A a2[2];
Index: gcc.c-torture/compile/20001116-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/20001116-1.c,v
retrieving revision 1.1
diff -u -3 -p -r1.1 20001116-1.c
--- gcc.c-torture/compile/20001116-1.c	27 Nov 2002 01:03:47 -0000	1.1
+++ gcc.c-torture/compile/20001116-1.c	31 May 2013 10:41:23 -0000
@@ -1,3 +1,3 @@
 int x[60];
 char *y = ((char*)&(x[2*8 + 2]) - 8);
-int z = (&"Foobar"[1] - &"Foobar"[0]);
+long int z = (&"Foobar"[1] - &"Foobar"[0]);
Index: gcc.c-torture/compile/20001205-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/20001205-1.c,v
retrieving revision 1.4
diff -u -3 -p -r1.4 20001205-1.c
--- gcc.c-torture/compile/20001205-1.c	18 Apr 2012 17:10:58 -0000	1.4
+++ gcc.c-torture/compile/20001205-1.c	31 May 2013 10:41:23 -0000
@@ -2,7 +2,7 @@
 
 static inline unsigned long rdfpcr(void)
 {
-        unsigned long tmp, ret;
+        unsigned int tmp, ret;
         __asm__ ("" : "=r"(tmp), "=r"(ret));
         return ret;
 }
Index: gcc.c-torture/compile/20001226-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/20001226-1.c,v
retrieving revision 1.23
diff -u -3 -p -r1.23 20001226-1.c
--- gcc.c-torture/compile/20001226-1.c	2 May 2013 21:41:11 -0000	1.23
+++ gcc.c-torture/compile/20001226-1.c	31 May 2013 10:41:23 -0000
@@ -1,6 +1,8 @@
+/* { dg-options "-fno-tree-vrp" } *//* XXX nickc: This test does not compile at -O2 or higher on machines without a large amount of stack space (> 2Mb!) because of the tree-vrp pass.  */
 /* { dg-do assemble } */
 /* { dg-skip-if "too much code for avr" { "avr-*-*" } { "*" } { "" } } */
 /* { dg-skip-if "too much code for pdp11" { "pdp11-*-*" } { "*" } { "" } } */
+/* { dg-skip-if "too much code" { rl78-*-* } { "*" } { "" } } */
 /* { dg-xfail-if "jump beyond 128K not supported" { xtensa*-*-* } { "-O0" } { "" } } */
 /* { dg-xfail-if "PR36698" { spu-*-* } { "-O0" } { "" } } */
 /* { dg-skip-if "" { m32c-*-* } { "*" } { "" } } */
@@ -21,7 +23,7 @@
 #define C1024(x,y) C256(x,y) C256(x+16,y) C256(x+32,y) C256(x+48,y)
 #define C4096(x,y) C1024(x,y) C1024(x,y+16) C1024(x,y+32) C1024(x,y+48)
 
-unsigned foo(int x[64], int y[64])
+unsigned long foo(int x[64], int y[64])
 {
   C4096(x,y);
   
@@ -31,4 +33,3 @@ unsigned foo(int x[64], int y[64])
  lt:
   return 0xF0123456;
 }
-
Index: gcc.c-torture/compile/990617-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/990617-1.c,v
retrieving revision 1.5
diff -u -3 -p -r1.5 990617-1.c
--- gcc.c-torture/compile/990617-1.c	2 Aug 2011 12:54:05 -0000	1.5
+++ gcc.c-torture/compile/990617-1.c	31 May 2013 10:41:23 -0000
@@ -12,10 +12,9 @@ int main()
         *p = 0x0000000070000000L;
         p += 2;
         {
-            unsigned int *addr = (unsigned int *)0x70000000;
+            unsigned int *addr = (unsigned int *)0x700;
             printf("%d, %d\n", addr[1], addr[0]);
         }
         
     } while (1);
 }
-
Index: gcc.c-torture/compile/calls.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/calls.c,v
retrieving revision 1.1
diff -u -3 -p -r1.1 calls.c
--- gcc.c-torture/compile/calls.c	27 Nov 2002 01:03:49 -0000	1.1
+++ gcc.c-torture/compile/calls.c	31 May 2013 10:41:23 -0000
@@ -9,7 +9,7 @@ f2 ()
 }
 f3 ()
 {
-  ((T) 10000000)();
+  ((T) 100000)();
 }
 f4 (r)
 {
Index: gcc.c-torture/compile/mangle-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/mangle-1.c,v
retrieving revision 1.3
diff -u -3 -p -r1.3 mangle-1.c
--- gcc.c-torture/compile/mangle-1.c	2 May 2013 21:41:14 -0000	1.3
+++ gcc.c-torture/compile/mangle-1.c	31 May 2013 10:41:23 -0000
@@ -1,9 +1,9 @@
 int foo(void)
 {
-  static int x asm ("x") = 3;
+  static int x asm ("z") = 3;
   return x++;
 }
 
-int X2 asm ("x.0") = 4;
-int X3 asm ("_x.0") = 5;
+int X2 asm ("z.0") = 4;
+int X3 asm ("_z.0") = 5;
 
Index: gcc.c-torture/compile/pr55955.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/pr55955.c,v
retrieving revision 1.1
diff -u -3 -p -r1.1 pr55955.c
--- gcc.c-torture/compile/pr55955.c	2 May 2013 21:41:19 -0000	1.1
+++ gcc.c-torture/compile/pr55955.c	31 May 2013 10:41:23 -0000
@@ -8,5 +8,5 @@ foo (int x)
   int a;
   for (a = x; a < 2; a++)
     for (b = 0; b < 2; b++)
-      *(unsigned short *) 0x100000UL %= 46;
+      *(unsigned short *) 0x1000UL %= 46;
 }
Index: gcc.c-torture/execute/memcpy-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/memcpy-2.c,v
retrieving revision 1.1
diff -u -3 -p -r1.1 memcpy-2.c
--- gcc.c-torture/execute/memcpy-2.c	3 Jul 2003 14:31:46 -0000	1.1
+++ gcc.c-torture/execute/memcpy-2.c	31 May 2013 10:41:23 -0000
@@ -34,7 +34,7 @@ static union {
 
 main ()
 {
-  int off1, off2, len, i;
+  long int off1, off2, len, i;
   char *p, *q, c;
 
   for (off1 = 0; off1 < MAX_OFFSET; off1++)
Index: gcc.c-torture/execute/pr43220.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/pr43220.c,v
retrieving revision 1.1
diff -u -3 -p -r1.1 pr43220.c
--- gcc.c-torture/execute/pr43220.c	11 Mar 2010 08:15:49 -0000	1.1
+++ gcc.c-torture/execute/pr43220.c	31 May 2013 10:41:23 -0000
@@ -3,7 +3,7 @@ void *volatile p;
 int
 main (void)
 {
-  int n = 0;
+  long int n = 0;
 lab:;
     {
       int x[n % 1000 + 1];
Index: gcc.c-torture/execute/pr52286.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/pr52286.c,v
retrieving revision 1.1
diff -u -3 -p -r1.1 pr52286.c
--- gcc.c-torture/execute/pr52286.c	18 Apr 2012 17:11:08 -0000	1.1
+++ gcc.c-torture/execute/pr52286.c	31 May 2013 10:41:23 -0000
@@ -8,10 +8,12 @@ main ()
 #if __SIZEOF_INT__ > 2
   int a, b;
   asm ("" : "=r" (a) : "0" (0));
+  a = 0;
   b = (~a | 1) & -2038094497;
 #else
   long a, b;
   asm ("" : "=r" (a) : "0" (0));
+  a = 0;
   b = (~a | 1) & -2038094497L;
 #endif
   if (b >= 0)
Index: gcc.c-torture/execute/pr52979-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/pr52979-1.c,v
retrieving revision 1.3
diff -u -3 -p -r1.3 pr52979-1.c
--- gcc.c-torture/execute/pr52979-1.c	2 May 2013 21:41:28 -0000	1.3
+++ gcc.c-torture/execute/pr52979-1.c	31 May 2013 10:41:23 -0000
@@ -8,7 +8,7 @@ foo (void)
 {
 }
 
-struct __attribute__((packed)) S { int g : 31; int h : 6; };
+struct __attribute__((packed)) S { long int g : 31; int h : 6; };
 struct S a = { 1 };
 static struct S b = { 1 };
 
Index: gcc.c-torture/execute/pr52979-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/pr52979-2.c,v
retrieving revision 1.3
diff -u -3 -p -r1.3 pr52979-2.c
--- gcc.c-torture/execute/pr52979-2.c	2 May 2013 21:41:28 -0000	1.3
+++ gcc.c-torture/execute/pr52979-2.c	31 May 2013 10:41:23 -0000
@@ -8,7 +8,7 @@ foo (void)
 {
 }
 
-struct __attribute__((packed)) S { int g : 31; int h : 6; };
+struct __attribute__((packed)) S { long int g : 31; int h : 6; };
 static struct S b = { 1 };
 struct S a = { 1 };
 
Index: gcc.c-torture/execute/builtins/memcpy-chk.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/builtins/memcpy-chk.c,v
retrieving revision 1.2
diff -u -3 -p -r1.2 memcpy-chk.c
--- gcc.c-torture/execute/builtins/memcpy-chk.c	25 Mar 2011 11:22:39 -0000	1.2
+++ gcc.c-torture/execute/builtins/memcpy-chk.c	31 May 2013 10:41:23 -0000
@@ -366,7 +366,7 @@ void
 __attribute__((noinline))
 test5 (void)
 {
-  int off1, off2, len, i;
+  long int off1, off2, len, i;
   char *p, *q, c;
 
   for (off1 = 0; off1 < MAX_OFFSET; off1++)
Index: gcc.c-torture/execute/builtins/memmove-chk.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/builtins/memmove-chk.c,v
retrieving revision 1.2
diff -u -3 -p -r1.2 memmove-chk.c
--- gcc.c-torture/execute/builtins/memmove-chk.c	25 Mar 2011 11:22:39 -0000	1.2
+++ gcc.c-torture/execute/builtins/memmove-chk.c	31 May 2013 10:41:23 -0000
@@ -464,7 +464,7 @@ void
 __attribute__((noinline))
 test6 (void)
 {
-  int off1, off2, len, i;
+  long int off1, off2, len, i;
   char *p, *q, c;
 
   for (off1 = 0; off1 < MAX_OFFSET; off1++)
Index: gcc.c-torture/execute/builtins/mempcpy-chk.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/builtins/mempcpy-chk.c,v
retrieving revision 1.2
diff -u -3 -p -r1.2 mempcpy-chk.c
--- gcc.c-torture/execute/builtins/mempcpy-chk.c	25 Mar 2011 11:22:39 -0000	1.2
+++ gcc.c-torture/execute/builtins/mempcpy-chk.c	31 May 2013 10:41:23 -0000
@@ -374,7 +374,7 @@ void
 __attribute__((noinline))
 test5 (void)
 {
-  int off1, off2, len, i;
+  long int off1, off2, len, i;
   char *p, *q, c;
 
   for (off1 = 0; off1 < MAX_OFFSET; off1++)
Index: gcc.dg/pr28755.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr28755.c,v
retrieving revision 1.5
diff -u -3 -p -r1.5 pr28755.c
--- gcc.dg/pr28755.c	18 Apr 2012 17:11:32 -0000	1.5
+++ gcc.dg/pr28755.c	31 May 2013 10:41:23 -0000
@@ -7,7 +7,7 @@
 struct S
 {
   void *s1;
-  unsigned s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14;
+  unsigned long s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14;
 };
 
 const struct S array[] = {
Index: gcc.dg/torture/nested-fn-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/nested-fn-1.c,v
retrieving revision 1.15
diff -u -3 -p -r1.15 nested-fn-1.c
--- gcc.dg/torture/nested-fn-1.c	2 May 2013 21:43:09 -0000	1.15
+++ gcc.dg/torture/nested-fn-1.c	31 May 2013 10:41:24 -0000
@@ -1,7 +1,7 @@
 /* PR middle-end/15345, c/16450 */
 /* Test whether unused nested functions aren't emitted into the assembly.  */
 /* { dg-do compile } */
-/* { dg-options "-g0" } */
+/* { dg-options "-g0 -fno-lto" } */
 /* { dg-require-effective-target trampolines } */
 
 int
Index: gcc.dg/tree-ssa/predcom-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/predcom-1.c,v
retrieving revision 1.2
diff -u -3 -p -r1.2 predcom-1.c
--- gcc.dg/tree-ssa/predcom-1.c	18 Apr 2012 17:12:38 -0000	1.2
+++ gcc.dg/tree-ssa/predcom-1.c	31 May 2013 10:41:24 -0000
@@ -17,7 +17,7 @@ void count_fib(void)
     fib[i] = (fib[i-1] + fib[i - 2]) & 0xffff;
 }
 
-unsigned avg[1000];
+unsigned long avg[1000];
 
 __attribute__ ((noinline))
 void count_averages(int n)
Index: lib/lto.exp
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/lib/lto.exp,v
retrieving revision 1.6
diff -u -3 -p -r1.6 lto.exp
--- lib/lto.exp	2 May 2013 21:52:34 -0000	1.6
+++ lib/lto.exp	31 May 2013 10:41:27 -0000
@@ -192,7 +192,7 @@ proc lto-link-and-maybe-run { testname o
 
     # Set up the options for linking this test.
     set options ""
-    lappend options "additional_flags=$optall $optfile"
+    lappend options "additional_flags=$optall $optfile -w"
 
     set target_board [target_info name]
     set relocatable 0
Index: lib/target-supports.exp
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/lib/target-supports.exp,v
retrieving revision 1.94
diff -u -3 -p -r1.94 target-supports.exp
--- lib/target-supports.exp	2 May 2013 21:52:35 -0000	1.94
+++ lib/target-supports.exp	31 May 2013 10:41:27 -0000
@@ -428,6 +428,11 @@ proc check_effective_target_trampolines 
     if [target_info exists no_trampolines] {
       return 0
     }
+    # FIXME: Setting "set_board_info gcc,no_trampolines 1" in
+    # msp340-sim.exp does not appear to be effective.
+    if { [istarget msp430-*-*] } {
+	return 0
+    }
     if { [istarget avr-*-*]
 	 || [istarget hppa2.0w-hp-hpux11.23]
 	|| [istarget hppa64-hp-hpux11.23] } {
@@ -462,6 +467,15 @@ proc check_profiling_available { test_wh
 
     # Tree profiling requires TLS runtime support.
     if { $test_what == "-fprofile-generate" } {
+	# RL78 does not support profile generation because
+	# it does not (yet) implement needed support functions.
+	if { [istarget rl78-*-*] } {
+	    return 0
+	}
+	if { [istarget xstormy16-*-*]
+	     || [istarget msp430-*-*] } {
+	    return 0;   
+	}
 	if { ![check_effective_target_tls_runtime] } {
 	    return 0
 	}
@@ -505,6 +519,15 @@ proc check_profiling_available { test_wh
 	return 0
     }
 
+    if {![info exists profiling_available_saved]} {
+	if { [istarget frv-*-*] }     { set profiling_available_saved 0 }
+	if { [istarget mn10300-*-*] } { set profiling_available_saved 0 }
+	if { [istarget am3*-*-*] }    { set profiling_available_saved 0 }
+	if { [istarget rl78-*-*] }    { set profiling_available_saved 0 }
+	if { [istarget sh-*-*] }      { set profiling_available_saved 0 }
+	if { [istarget v850*-*-*] }   { set profiling_available_saved 0 }
+	if { [istarget msp430*-*-*] } { set profiling_available_saved 0 }
+    }
     # Now examine the cache variable.
     if {![info exists profiling_available_saved]} {
 	# Some targets don't have any implementation of __bb_init_func or are
@@ -583,6 +606,16 @@ proc check_effective_target_pcc_bitfield
     }]
 }
 
+# Return 1 if target defines TARGET_MS_BITFIELD_LAYOUT_P to false.
+
+proc check_effective_target_non_ms_bitfield_layout { } {
+    return [check_no_compiler_messages non_ms_bitfield_layout assembly {
+	struct foo1 { int x:4; short y:4; };
+        struct foo2 { int z:8; };
+        int s[sizeof (struct foo1) == sizeof (struct foo2) ? 1 : -1];
+    }]
+}
+
 # Add to FLAGS all the target-specific flags needed to use thread-local storage.
 
 proc add_options_for_tls { flags } {
@@ -646,6 +679,14 @@ proc check_effective_target_tls_emulated
 # Return 1 if TLS executables can run correctly, 0 otherwise.
 
 proc check_effective_target_tls_runtime {} {
+    # RL78 does not have TLS support.
+    if { [istarget rl78-*-*] } {
+	return 0
+    }
+    # MSP430 does not have TLS support.
+    if { [istarget msp430-*-*] } {
+	return 0
+    }
     return [check_runtime tls_runtime {
 	__thread int thr = 0;
 	int main (void) { return thr; }
@@ -869,6 +910,31 @@ proc check_effective_target_hard_float {
     }]
 }
 
+# Return true if the target supports arithmetic operations on denormal
+# (aka sub-normal) floating point values.  Targets supporting full IEEE
+# 754 compliance (in a software library or hardware FPU) do this, but
+# other targets only have partial (or no) IEEE compliance.
+
+proc check_effective_target_denorm_arithmetic { } {
+    global denorm_arithmetic_available_saved
+
+    # Examine the cache variable.
+    if {![info exists denorm_arithmetic_available_saved]} {
+	# We should probably try to code a compile-and-run test
+	# here, but that is rather complicated.  Instead for now
+	# we just use a table of targets.  XXX - extend as necessary.
+	if {   [istarget m68k-*-*]
+	    || [istarget rx-*-*]
+	    || [istarget bar-foo-*] } {
+	    set denorm_arithmetic_available_saved 0
+	} else {
+	    set denorm_arithmetic_available_saved 1
+	}
+    }
+
+    return $denorm_arithmetic_available_saved
+}
+
 # Return true if the target is a 64-bit MIPS target.
 
 proc check_effective_target_mips64 { } {
@@ -1134,7 +1200,7 @@ proc check_effective_target_static_libgf
 proc check_linker_plugin_available { } {
   return [check_no_compiler_messages_nocache linker_plugin executable {
      int main() { return 0; }
-  } "-flto -fuse-linker-plugin"]
+  } "-flto -fuse-linker-plugin -O1"]
 }
 
 # Return 1 if the target supports executing 750CL paired-single instructions, 0
@@ -2012,6 +2078,7 @@ proc check_effective_target_vect_uintflo
 	      || ([istarget powerpc*-*-*]
 		  && ![istarget powerpc-*-linux*paired*])
 	      || [istarget x86_64-*-*] 
+	      || [istarget aarch64*-*-*]
 	      || ([istarget arm*-*-*]
 		  && [check_effective_target_arm_neon_ok])} {
            set et_vect_uintfloat_cvt_saved 1
@@ -2422,6 +2489,7 @@ proc check_effective_target_arm_arm_ok {
 # used.
 
 proc check_effective_target_arm_thumb1_ok { } {
+    if { ! [istarget arm*-*-*] } { return 0 }
     return [check_no_compiler_messages arm_thumb1_ok assembly {
 	#if !defined(__arm__) || !defined(__thumb__) || defined(__thumb2__)
 	#error FOO
@@ -2433,6 +2501,7 @@ proc check_effective_target_arm_thumb1_o
 # used.
 
 proc check_effective_target_arm_thumb2_ok { } {
+    if { ! [istarget arm*-*-*] } { return 0 }
     return [check_no_compiler_messages arm_thumb2_ok assembly {
 	#if !defined(__thumb2__)
 	#error FOO
@@ -2467,6 +2536,7 @@ proc check_effective_target_arm_thumb2 {
 # Return 1 if this is an ARM cortex-M profile cpu
 
 proc check_effective_target_arm_cortex_m { } {
+    if { ! [istarget arm*-*-*] } { return 0 }
     return [check_no_compiler_messages arm_cortex_m assembly {
 	#if !defined(__ARM_ARCH_7M__) \
             && !defined (__ARM_ARCH_7EM__) \
@@ -5035,7 +5105,7 @@ proc check_effective_target_c++98 { } {
     if ![check_effective_target_c++] {
 	return 0
     }
-    return [check-flags { { } { } { } { -std=c++0x -std=gnu++0x -std=c++11 -std=gnu++11 -std=c++1y -std=gnu++1y } }]
+    return [check-flags { { } { } { -std=c++98 -std=gnu++98 } }]
 }
 
 # Return 1 if expensive testcases should be run.
Index: c-c++-common/scal-to-vec1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/c-c++-common/scal-to-vec1.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 scal-to-vec1.c
*** c-c++-common/scal-to-vec1.c	2 May 2013 21:37:49 -0000	1.1
--- c-c++-common/scal-to-vec1.c	3 Jun 2013 10:53:24 -0000
***************
*** 1,6 ****
--- 1,7 ----
  /* { dg-do compile } */
  /* { dg-options "-Wno-long-long" } */
  /* { dg-options "-Wno-long-long -mabi=altivec" { target { { powerpc*-*-linux* } && ilp32 } } } */
+ /* { dg-skip-if "sizeof float == sizeof double, so some of the errors are not generated" { msp430*-*-* } "*" "" } */
  
  #define vector(elcount, type)  \
  __attribute__((vector_size((elcount)*sizeof(type)))) type
Index: c-c++-common/torture/complex-sign-add.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/c-c++-common/torture/complex-sign-add.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 complex-sign-add.c
*** c-c++-common/torture/complex-sign-add.c	2 May 2013 21:38:01 -0000	1.8
--- c-c++-common/torture/complex-sign-add.c	3 Jun 2013 10:53:24 -0000
***************
*** 1,6 ****
--- 1,8 ----
  /* Test complex arithmetic with signed zeros.  Pure complex
     addition.  */
  /* { dg-do run } */
+ /* { dg-skip-if "test too big" { rl78-*-* } "*" "" } */
+ /* { dg-skip-if "test too big for small mode" { msp430*-*-* } "*" "" } */
  /* { dg-options "-std=gnu99" { target c } } */
  
  #include "complex-sign.h"
Index: c-c++-common/torture/complex-sign-mixed-add.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/c-c++-common/torture/complex-sign-mixed-add.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 complex-sign-mixed-add.c
*** c-c++-common/torture/complex-sign-mixed-add.c	2 May 2013 21:38:01 -0000	1.8
--- c-c++-common/torture/complex-sign-mixed-add.c	3 Jun 2013 10:53:24 -0000
***************
*** 1,6 ****
--- 1,8 ----
  /* Test complex arithmetic with signed zeros.  Mixed real/complex
     addition.  */
  /* { dg-do run } */
+ /* { dg-skip-if "test too big" { rl78-*-* } "*" "" } */
+ /* { dg-skip-if "test too big for small mode" { msp430*-*-* } "*" "" } */
  /* { dg-options "-std=gnu99" { target c } } */
  
  #include "complex-sign.h"
Index: c-c++-common/torture/complex-sign-mixed-mul.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/c-c++-common/torture/complex-sign-mixed-mul.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 complex-sign-mixed-mul.c
*** c-c++-common/torture/complex-sign-mixed-mul.c	2 May 2013 21:38:01 -0000	1.8
--- c-c++-common/torture/complex-sign-mixed-mul.c	3 Jun 2013 10:53:24 -0000
***************
*** 1,6 ****
--- 1,8 ----
  /* Test complex arithmetic with signed zeros.  Mixed real/complex
     multiplication.  */
  /* { dg-do run } */
+ /* { dg-skip-if "test too big" { rl78-*-* } "*" "" } */
+ /* { dg-skip-if "test too big for small mode" { msp430*-*-* } "*" "" } */
  /* { dg-options "-std=gnu99" { target c } } */
  
  #include "complex-sign.h"
Index: c-c++-common/torture/complex-sign-mixed-sub.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/c-c++-common/torture/complex-sign-mixed-sub.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 complex-sign-mixed-sub.c
*** c-c++-common/torture/complex-sign-mixed-sub.c	2 May 2013 21:38:01 -0000	1.8
--- c-c++-common/torture/complex-sign-mixed-sub.c	3 Jun 2013 10:53:24 -0000
***************
*** 1,6 ****
--- 1,8 ----
  /* Test complex arithmetic with signed zeros.  Mixed real/complex
     subtraction.  */
  /* { dg-do run } */
+ /* { dg-skip-if "test too big" { rl78-*-* } "*" "" } */
+ /* { dg-skip-if "test too big for small mode" { msp430*-*-* } "*" "" } */
  /* { dg-options "-std=gnu99" { target c } } */
  
  #include "complex-sign.h"
Index: c-c++-common/torture/complex-sign-mul.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/c-c++-common/torture/complex-sign-mul.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 complex-sign-mul.c
*** c-c++-common/torture/complex-sign-mul.c	2 May 2013 21:38:01 -0000	1.8
--- c-c++-common/torture/complex-sign-mul.c	3 Jun 2013 10:53:24 -0000
***************
*** 1,6 ****
--- 1,8 ----
  /* Test complex arithmetic with signed zeros.  Pure complex
     multiplication.  */
  /* { dg-do run } */
+ /* { dg-skip-if "test too big" { rl78-*-* } "*" "" } */
+ /* { dg-skip-if "test too big for small mode" { msp430*-*-* } "*" "" } */
  /* { dg-options "-std=gnu99" { target c } } */
  
  #include "complex-sign.h"
Index: c-c++-common/torture/complex-sign-sub.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/c-c++-common/torture/complex-sign-sub.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 complex-sign-sub.c
*** c-c++-common/torture/complex-sign-sub.c	2 May 2013 21:38:02 -0000	1.8
--- c-c++-common/torture/complex-sign-sub.c	3 Jun 2013 10:53:24 -0000
***************
*** 1,6 ****
--- 1,8 ----
  /* Test complex arithmetic with signed zeros.  Pure complex
     subtraction.  */
  /* { dg-do run } */
+ /* { dg-skip-if "test too big" { rl78-*-* } "*" "" } */
+ /* { dg-skip-if "test too big for small mode" { msp430*-*-* } "*" "" } */
  /* { dg-options "-std=gnu99" { target c } } */
  
  #include "complex-sign.h"
Index: c-c++-common/torture/vector-compare-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/c-c++-common/torture/vector-compare-1.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 vector-compare-1.c
*** c-c++-common/torture/vector-compare-1.c	2 May 2013 21:38:02 -0000	1.1
--- c-c++-common/torture/vector-compare-1.c	3 Jun 2013 10:53:24 -0000
***************
*** 1,5 ****
  /* { dg-do run } */
! #define vector(elcount, type)  \
  __attribute__((vector_size((elcount)*sizeof(type)))) type
  
  #define check_compare(count, res, i0, i1, op, fmt) \
--- 1,8 ----
  /* { dg-do run } */
! /* { dg-skip-if "test too big" { rl78-*-* } "*" "" } */
! /* { dg-skip-if "test too big for small mode" { msp430*-*-* } "*" "" } */
! 
! #define vector(elcount, type)					\
  __attribute__((vector_size((elcount)*sizeof(type)))) type
  
  #define check_compare(count, res, i0, i1, op, fmt) \
Index: g++.dg/compat/struct-layout-1.exp
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/compat/struct-layout-1.exp,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 struct-layout-1.exp
*** g++.dg/compat/struct-layout-1.exp	2 May 2013 21:38:21 -0000	1.10
--- g++.dg/compat/struct-layout-1.exp	3 Jun 2013 10:53:24 -0000
*************** if [info exists ALT_CXX_UNDER_TEST] then
*** 118,125 ****
--- 118,129 ----
  	    append alt_ld_library_path ":${ALT_LD_LIBRARY_PATH}"
  	}
      }
+ # If there is no alternative compiler to test, then skip this section.
+ } else {
+     return
  }
  
+ 
  set tstobjdir "$tmpdir/g++.dg-struct-layout-1"
  set generator "$tmpdir/g++.dg-struct-layout-1_generate.exe"
  
Index: g++.dg/cpp0x/alias-decl-debug-0.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/cpp0x/alias-decl-debug-0.C,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 alias-decl-debug-0.C
*** g++.dg/cpp0x/alias-decl-debug-0.C	18 Apr 2012 17:09:12 -0000	1.1
--- g++.dg/cpp0x/alias-decl-debug-0.C	3 Jun 2013 10:53:24 -0000
***************
*** 1,5 ****
  // Origin: PR c++/51032
! // { dg-skip-if "No stabs" { mmix-*-* *-*-aix* alpha*-*-* hppa*64*-*-* ia64-*-* *-*-vxworks* } { "*" } { "" } }
  // { dg-options "-std=c++0x -gstabs+" }
  
  template <class C>
--- 1,5 ----
  // Origin: PR c++/51032
! // { dg-skip-if "No stabs" { mmix-*-* *-*-aix* alpha*-*-* hppa*64*-*-* ia64-*-* *-*-vxworks* v850-*-* } { "*" } { "" } }
  // { dg-options "-std=c++0x -gstabs+" }
  
  template <class C>
Index: g++.dg/cpp0x/gen-attrs-52.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/cpp0x/gen-attrs-52.C,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 gen-attrs-52.C
*** g++.dg/cpp0x/gen-attrs-52.C	2 May 2013 21:38:55 -0000	1.1
--- g++.dg/cpp0x/gen-attrs-52.C	3 Jun 2013 10:53:24 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do compile { target c++11 } }
+ // { dg-require-effective-target int32plus }
  
  struct A {int i;}  a [[gnu::aligned(16)]];
  struct B {int i;} __attribute__((aligned(16))) b;
Index: g++.dg/cpp0x/initlist25.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/cpp0x/initlist25.C,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 initlist25.C
*** g++.dg/cpp0x/initlist25.C	18 Apr 2012 17:09:24 -0000	1.3
--- g++.dg/cpp0x/initlist25.C	3 Jun 2013 10:53:24 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // PR c++/41754
+ // { dg-require-effective-target int32plus }
  // { dg-options -std=c++0x }
  // { dg-do run }
  
Index: g++.dg/cpp0x/initlist5.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/cpp0x/initlist5.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 initlist5.C
*** g++.dg/cpp0x/initlist5.C	2 May 2013 21:39:01 -0000	1.9
--- g++.dg/cpp0x/initlist5.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // Test for narrowing diagnostics
+ // { dg-require-effective-target int32plus }
  // { dg-options "-std=c++0x -pedantic-errors" }
  
  #include <initializer_list>
Index: g++.dg/cpp0x/nullptr04.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/cpp0x/nullptr04.C,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 nullptr04.C
*** g++.dg/cpp0x/nullptr04.C	2 May 2013 21:39:03 -0000	1.5
--- g++.dg/cpp0x/nullptr04.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do compile }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-std=c++0x" }
  
  // Test cast to int
Index: g++.dg/cpp0x/variadic-value1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/cpp0x/variadic-value1.C,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 variadic-value1.C
*** g++.dg/cpp0x/variadic-value1.C	2 May 2013 21:39:16 -0000	1.3
--- g++.dg/cpp0x/variadic-value1.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
--- 1,6 ----
  // PR c++/52796
  // { dg-do run { target c++11 } }
+ // { dg-require-effective-target int32plus }
  
  inline void *operator new(__SIZE_TYPE__ s, void *p) { return p; }
  
Index: g++.dg/eh/omit-frame-pointer.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/eh/omit-frame-pointer.C,v
retrieving revision 1.6
diff -u -3 -p -c -p -r1.6 omit-frame-pointer.C
*** g++.dg/eh/omit-frame-pointer.C	12 Feb 2010 10:27:31 -0000	1.6
--- g++.dg/eh/omit-frame-pointer.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run }
+ // { dg-require-effective-target int32plus }
  // { dg-options -fomit-frame-pointer }
  
  #include <iostream>
Index: g++.dg/ext/alias-canon.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/ext/alias-canon.C,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 alias-canon.C
*** g++.dg/ext/alias-canon.C	10 Mar 2008 12:31:09 -0000	1.1
--- g++.dg/ext/alias-canon.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
--- 1,6 ----
  // PR c++/34935
  /* { dg-do compile } */
+ /* { dg-options "-m64bit-doubles" { target rx*-*-* } } */
  /* { dg-final { scan-assembler "_Z1fi" } } */
  /* { dg-final { scan-assembler "_Z1fb" } } */
  /* { dg-final { scan-assembler "_Z1fd" } } */
Index: g++.dg/ext/attribute-test-1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/ext/attribute-test-1.C,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 attribute-test-1.C
*** g++.dg/ext/attribute-test-1.C	2 May 2013 21:39:39 -0000	1.8
--- g++.dg/ext/attribute-test-1.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run }
+ // { dg-require-effective-target int32plus }
  // { dg-options "" }
  // PR c++/13989
  
Index: g++.dg/ext/bitfield4.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/ext/bitfield4.C,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 bitfield4.C
*** g++.dg/ext/bitfield4.C	2 May 2013 21:39:39 -0000	1.8
--- g++.dg/ext/bitfield4.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ // { dg-require-effective-target non_ms_bitfield_layout }
  /* { dg-options "" } */
  /* { dg-options "-Wno-packed-bitfield-compat -mno-ms-bitfields" { target { i?86-*-mingw* x86_64-*-mingw* } } } */
  
Index: g++.dg/ext/bitfield5.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/ext/bitfield5.C,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 bitfield5.C
*** g++.dg/ext/bitfield5.C	2 May 2013 21:39:39 -0000	1.8
--- g++.dg/ext/bitfield5.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ // { dg-require-effective-target non_ms_bitfield_layout }
  /* { dg-options "-Wno-packed-bitfield-compat" } */
  /* { dg-options "-Wno-packed-bitfield-compat -mno-ms-bitfields" { target { i?86-*-mingw* x86_64-*-mingw* } } } */
  
Index: g++.dg/ext/utf-cvt.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/ext/utf-cvt.C,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 utf-cvt.C
*** g++.dg/ext/utf-cvt.C	2 May 2013 21:39:44 -0000	1.5
--- g++.dg/ext/utf-cvt.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,6 ****
--- 1,7 ----
  /* Contributed by Kris Van Hees <kris.van.hees@oracle.com> */
  /* Test the char16_t and char32_t promotion rules. */
  /* { dg-do compile } */
+ // { dg-require-effective-target int32plus }
  /* { dg-options "-std=c++0x -Wall -Wconversion -Wsign-conversion -Wsign-promo" } */
  
  extern void f_c (char);
Index: g++.dg/init/array11.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/init/array11.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 array11.C
*** g++.dg/init/array11.C	2 May 2013 21:39:51 -0000	1.9
--- g++.dg/init/array11.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,3 ****
--- 1,4 ----
+ // { dg-require-effective-target int32plus }
  /* PR 11665 
     Orgin: jwhite@cse.unl.edu
     The problem was in initializer_constant_valid_p,
Index: g++.dg/init/array15.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/init/array15.C,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 array15.C
*** g++.dg/init/array15.C	2 May 2013 21:39:52 -0000	1.7
--- g++.dg/init/array15.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run }
+ // { dg-require-effective-target int32plus }
  
  // Copyright (C) 2004 Free Software Foundation, Inc.
  // Contributed by Nathan Sidwell 8 Dec 2004 <nathan@codesourcery.com>
Index: g++.dg/init/array16.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/init/array16.C,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 array16.C
*** g++.dg/init/array16.C	2 May 2013 21:39:52 -0000	1.10
--- g++.dg/init/array16.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,6 ****
--- 1,7 ----
  // Causes timeout for the MMIX simulator on a 3GHz P4 and we can't
  // have "compile" for some targets and "run" for others.
  // { dg-do run { target { ! mmix-*-* } } }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-mstructure-size-boundary=8" { target arm*-*-* } }
  
  // Copyright (C) 2004 Free Software Foundation, Inc.
Index: g++.dg/lookup/builtin5.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/lookup/builtin5.C,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 builtin5.C
*** g++.dg/lookup/builtin5.C	2 May 2013 21:40:00 -0000	1.3
--- g++.dg/lookup/builtin5.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
--- 1,6 ----
  // PR c++/37276
  
+ // { dg-do compile { target c++98 } }
  // { dg-final { scan-assembler "_ZSt5atanhd" } }
  
  namespace std
Index: g++.dg/lto/20080908-1_0.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/lto/20080908-1_0.C,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 20080908-1_0.C
*** g++.dg/lto/20080908-1_0.C	12 Feb 2010 10:37:04 -0000	1.1
--- g++.dg/lto/20080908-1_0.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,6 ----
  /* { dg-lto-do run }  */
+ // { dg-require-effective-target int32plus }
+ // Note: this test implicitly assumes that sizeof (float) == sizeof (int)
  extern "C" { extern void *memcpy (void *, const void *, unsigned); }
  
  inline int
Index: g++.dg/opt/anonunion1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/opt/anonunion1.C,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 anonunion1.C
*** g++.dg/opt/anonunion1.C	27 Nov 2002 01:03:30 -0000	1.1
--- g++.dg/opt/anonunion1.C	3 Jun 2013 10:53:25 -0000
***************
*** 3,8 ****
--- 3,9 ----
  // was not propagated back to the anon union itself, causing addressof
  // not to be replaced with stack slot.
  // { dg-do compile }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-O2" }
  
  struct A {
Index: g++.dg/opt/asm1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/opt/asm1.C,v
retrieving revision 1.4
diff -u -3 -p -c -p -r1.4 asm1.C
*** g++.dg/opt/asm1.C	18 Apr 2012 17:10:06 -0000	1.4
--- g++.dg/opt/asm1.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
--- 1,6 ----
  // PR c++/6747
  // { dg-do compile }
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  // { dg-options "-O" }
  
  void foo()
Index: g++.dg/opt/asm2.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/opt/asm2.C,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 asm2.C
*** g++.dg/opt/asm2.C	8 Feb 2005 15:50:04 -0000	1.1
--- g++.dg/opt/asm2.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR inline-asm/15740 */
  /* { dg-do compile } */
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  /* { dg-options "-O" } */
  
  void foo(void)
Index: g++.dg/opt/pr15551.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/opt/pr15551.C,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 pr15551.C
*** g++.dg/opt/pr15551.C	12 Feb 2010 10:27:31 -0000	1.7
--- g++.dg/opt/pr15551.C	3 Jun 2013 10:53:25 -0000
***************
*** 3,8 ****
--- 3,9 ----
  // Testcase submitted by Hans Horn to mingw bug tracker
  //
  // { dg-do run }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-O3" }
  
  #include <cstring>
Index: g++.dg/opt/pr36449.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/opt/pr36449.C,v
retrieving revision 1.6
diff -u -3 -p -c -p -r1.6 pr36449.C
*** g++.dg/opt/pr36449.C	2 May 2013 21:40:03 -0000	1.6
--- g++.dg/opt/pr36449.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
--- 1,6 ----
  // PR middle-end/36449
  // { dg-do run }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-O3" }
  
  extern "C" void exit (int);
Index: g++.dg/opt/temp2.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/opt/temp2.C,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 temp2.C
*** g++.dg/opt/temp2.C	2 May 2013 21:40:06 -0000	1.7
--- g++.dg/opt/temp2.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run }
+ // { dg-require-effective-target int32plus }
  
  // Copyright (C) 2006 Free Software Foundation, Inc.
  
Index: g++.dg/opt/thunk1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/opt/thunk1.C,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 thunk1.C
*** g++.dg/opt/thunk1.C	2 May 2013 21:40:06 -0000	1.10
--- g++.dg/opt/thunk1.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,6 ****
--- 1,7 ----
  // PR 6788
  // Test that the thunk adjusts the this pointer properly.
  // { dg-do run }
+ // { dg-require-effective-target int32plus }
  
  extern "C" void abort ();
  
Index: g++.dg/other/PR23205.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/other/PR23205.C,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 PR23205.C
*** g++.dg/other/PR23205.C	2 May 2013 21:40:07 -0000	1.11
--- g++.dg/other/PR23205.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
  /* { dg-do compile } */
! /* { dg-skip-if "No stabs" { aarch64*-*-* mmix-*-* *-*-aix* alpha*-*-* hppa*64*-*-* ia64-*-* tile*-*-* *-*-vxworks } { "*" } { "" } } */
  /* { dg-options "-gstabs+ -fno-eliminate-unused-debug-types" } */
  
  const int foobar = 4;
--- 1,5 ----
  /* { dg-do compile } */
! /* { dg-skip-if "No stabs" { aarch64*-*-* mmix-*-* *-*-aix* alpha*-*-* hppa*64*-*-* ia64-*-* tile*-*-* *-*-vxworks v850-*-* } { "*" } { "" } } */
  /* { dg-options "-gstabs+ -fno-eliminate-unused-debug-types" } */
  
  const int foobar = 4;
Index: g++.dg/other/large-size-array.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/other/large-size-array.C,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 large-size-array.C
*** g++.dg/other/large-size-array.C	25 Mar 2011 11:21:56 -0000	1.3
--- g++.dg/other/large-size-array.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-skip-if "ICEs because insns cannot be generated for the bogus arrays" { msp430-*-* } { "*" } { "" } } */
  #include <limits.h>
  
  #ifdef _WIN64
Index: g++.dg/other/pr23205-2.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/other/pr23205-2.C,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 pr23205-2.C
*** g++.dg/other/pr23205-2.C	2 May 2013 21:40:10 -0000	1.7
--- g++.dg/other/pr23205-2.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
  /* { dg-do compile } */
! /* { dg-skip-if "No stabs" { aarch64*-*-* mmix-*-* *-*-aix* alpha*-*-* hppa*64*-*-* ia64-*-* tile*-*-* } { "*" } { "" } } */
  /* { dg-options "-gstabs+ -fno-eliminate-unused-debug-types -ftoplevel-reorder" } */
  
  const int foobar = 4;
--- 1,5 ----
  /* { dg-do compile } */
! /* { dg-skip-if "No stabs" { aarch64*-*-* mmix-*-* *-*-aix* alpha*-*-* hppa*64*-*-* ia64-*-* tile*-*-* v850-*-* } { "*" } { "" } } */
  /* { dg-options "-gstabs+ -fno-eliminate-unused-debug-types -ftoplevel-reorder" } */
  
  const int foobar = 4;
Index: g++.dg/other/pr31078.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/other/pr31078.C,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 pr31078.C
*** g++.dg/other/pr31078.C	2 May 2013 21:40:10 -0000	1.5
--- g++.dg/other/pr31078.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,3 ****
--- 1,4 ----
+ // { dg-require-effective-target int32plus }
  typedef int SLONG;
  typedef char SCHAR;
  typedef short SSHORT;
Index: g++.dg/parse/defarg5.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/parse/defarg5.C,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 defarg5.C
*** g++.dg/parse/defarg5.C	2 May 2013 21:40:13 -0000	1.7
--- g++.dg/parse/defarg5.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do compile }
+ // { dg-require-effective-target int32plus }
  
  // Copyright (C) 2003 Free Software Foundation, Inc.
  // Contributed by Nathan Sidwell 5 Sep 2003 <nathan@codesourcery.com>
Index: g++.dg/rtti/typeid4.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/rtti/typeid4.C,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 typeid4.C
*** g++.dg/rtti/typeid4.C	18 Apr 2012 17:10:16 -0000	1.8
--- g++.dg/rtti/typeid4.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-O2" }
  
  #include <typeinfo>
Index: g++.dg/template/friend10.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/template/friend10.C,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 friend10.C
*** g++.dg/template/friend10.C	18 Apr 2012 17:10:21 -0000	1.8
--- g++.dg/template/friend10.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run }
+ // { dg-require-effective-target int32plus }
  
  // Copyright (C) 2002 Free Software Foundation, Inc.
  // Contributed by Nathan Sidwell 24 Dec 2002 <nathan@codesourcery.com>
Index: g++.dg/torture/pr31863.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/pr31863.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 pr31863.C
*** g++.dg/torture/pr31863.C	2 May 2013 21:40:36 -0000	1.9
--- g++.dg/torture/pr31863.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do link } */
+ // { dg-require-effective-target int32plus }
  /* { dg-timeout-factor 2.0 } */
  /* { dg-skip-if "Program too big" { "avr-*-*" } { "*" } { "" } } */
  
Index: g++.dg/torture/pr44492.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/pr44492.C,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr44492.C
*** g++.dg/torture/pr44492.C	25 Mar 2011 11:22:18 -0000	1.1
--- g++.dg/torture/pr44492.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
--- 1,6 ----
  // PR middle-end/44492
  // { dg-do run }
+ // { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } }
  
  struct T { unsigned long p; };
  struct S { T a, b, c; unsigned d; };
Index: g++.dg/torture/type-generic-1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/type-generic-1.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 type-generic-1.C
*** g++.dg/torture/type-generic-1.C	18 Apr 2012 17:10:34 -0000	1.9
--- g++.dg/torture/type-generic-1.C	3 Jun 2013 10:53:25 -0000
***************
*** 4,9 ****
--- 4,10 ----
  /* { dg-do run } */
  /* { dg-add-options ieee } */
  /* { dg-skip-if "No Inf/NaN support" { spu-*-* } } */
+ /* { dg-skip-if "non-IEEE math" { "rx-*-*" } { "*" } { "-m64bit-doubles" } } */
  
  #include "../../gcc.dg/tg-tests.h"
  
Index: g++.dg/torture/stackalign/throw-3.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/torture/stackalign/throw-3.C,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 throw-3.C
*** g++.dg/torture/stackalign/throw-3.C	18 Mar 2009 17:14:49 -0000	1.1
--- g++.dg/torture/stackalign/throw-3.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-skip-if "Stack alignment is too small" { msp430-*-* } "*" "" } */
  
  #include "check.h"
  
Index: g++.dg/tree-ssa/pr20458.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/tree-ssa/pr20458.C,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 pr20458.C
*** g++.dg/tree-ssa/pr20458.C	12 Feb 2010 10:27:32 -0000	1.3
--- g++.dg/tree-ssa/pr20458.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ // { dg-require-effective-target int32plus }
  /* { dg-options "-O2" } */
  
  /* The tail call optimization would inapproriately tail call the 
Index: g++.dg/tree-ssa/pr27291.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/tree-ssa/pr27291.C,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 pr27291.C
*** g++.dg/tree-ssa/pr27291.C	2 May 2013 21:40:48 -0000	1.5
--- g++.dg/tree-ssa/pr27291.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ // { dg-require-effective-target int32plus }
  /* { dg-options "-O2" } */
  
  namespace std
Index: g++.dg/tree-ssa/pr49516.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/tree-ssa/pr49516.C,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 pr49516.C
*** g++.dg/tree-ssa/pr49516.C	2 May 2013 21:40:48 -0000	1.5
--- g++.dg/tree-ssa/pr49516.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ // { dg-require-effective-target int32plus }
  /* { dg-options "-O2" } */
  
  extern "C" void abort (void);
Index: g++.dg/warn/Wconversion-integer.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/warn/Wconversion-integer.C,v
retrieving revision 1.6
diff -u -3 -p -c -p -r1.6 Wconversion-integer.C
*** g++.dg/warn/Wconversion-integer.C	2 May 2013 21:40:51 -0000	1.6
--- g++.dg/warn/Wconversion-integer.C	3 Jun 2013 10:53:25 -0000
***************
*** 2,7 ****
--- 2,8 ----
     C++ equivalent of gcc/gcc.dg/Wconversion-integer.c  */
  
  // { dg-do compile } 
+ // { dg-require-effective-target int32plus }
  // { dg-options "-fsigned-char -Wconversion" } 
  
  #include <limits.h>
Index: g++.dg/warn/Wconversion-real-integer.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/warn/Wconversion-real-integer.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 Wconversion-real-integer.C
*** g++.dg/warn/Wconversion-real-integer.C	2 May 2013 21:40:52 -0000	1.9
--- g++.dg/warn/Wconversion-real-integer.C	3 Jun 2013 10:53:25 -0000
***************
*** 5,10 ****
--- 5,11 ----
  /* { dg-do compile }
  /* { dg-options "-Wconversion -ftrack-macro-expansion=0" } */
  /* { dg-require-effective-target int32plus } */
+ /* { dg-skip-if "non-IEEE math" { "rx-*-*" } { "*" } { "-m64bit-doubles" } } */
  #include <limits.h>
  
  void fsi (signed int x);
Index: g++.dg/warn/Wconversion3.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/warn/Wconversion3.C,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 Wconversion3.C
*** g++.dg/warn/Wconversion3.C	2 May 2013 21:40:52 -0000	1.5
--- g++.dg/warn/Wconversion3.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
--- 1,6 ----
  // PR c++/34198
  // { dg-do compile }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-O2 -Wconversion -Wsign-conversion" }
  
  signed char sc;
Index: g++.dg/warn/Wdouble-promotion.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/warn/Wdouble-promotion.C,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 Wdouble-promotion.C
*** g++.dg/warn/Wdouble-promotion.C	2 May 2013 21:40:52 -0000	1.7
--- g++.dg/warn/Wdouble-promotion.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,6 ----
  /* { dg-do compile } */
+ // { dg-require-effective-target int32plus }
+ // { dg-require-effective-target large_double }
  /* { dg-options "-Wdouble-promotion -ftrack-macro-expansion=2" } */
  
  #include <stddef.h>
Index: g++.dg/warn/Wstrict-aliasing-5.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/warn/Wstrict-aliasing-5.C,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 Wstrict-aliasing-5.C
*** g++.dg/warn/Wstrict-aliasing-5.C	2 May 2013 21:40:56 -0000	1.7
--- g++.dg/warn/Wstrict-aliasing-5.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ // { dg-require-effective-target int32plus }
  /* { dg-options "-Wstrict-aliasing=2 -O2" } */
  
  float foo ()
Index: g++.dg/warn/Wstrict-aliasing-bogus-signed-unsigned.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/warn/Wstrict-aliasing-bogus-signed-unsigned.C,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 Wstrict-aliasing-bogus-signed-unsigned.C
*** g++.dg/warn/Wstrict-aliasing-bogus-signed-unsigned.C	2 May 2013 21:40:56 -0000	1.5
--- g++.dg/warn/Wstrict-aliasing-bogus-signed-unsigned.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ // { dg-require-effective-target int32plus }
  /* { dg-options "-O2 -Wstrict-aliasing -fstrict-aliasing" } */
  
  
Index: g++.dg/warn/weak1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.dg/warn/weak1.C,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 weak1.C
*** g++.dg/warn/weak1.C	2 May 2013 21:41:01 -0000	1.10
--- g++.dg/warn/weak1.C	3 Jun 2013 10:53:25 -0000
***************
*** 8,13 ****
--- 8,14 ----
  // symbols in the same way as undefined strong symbols.  The test
  // therefore fails to load, so skip it.
  // { dg-skip-if "" { "*-*-vxworks*" && nonpic } "*" { "-non-static" } }
+ // { dg-skip-if "No dynamic loader" { rx-*-* } { "*" } { "" } }
  
  extern void foo (void) __attribute__ ((weak));
  
Index: g++.old-deja/g++.benjamin/15071.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.benjamin/15071.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 15071.C
*** g++.old-deja/g++.benjamin/15071.C	18 Apr 2012 17:10:42 -0000	1.9
--- g++.old-deja/g++.benjamin/15071.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // 981203 bkoz
  // g++/15071
  // gcc invocation fails to link in libstdc++
Index: g++.old-deja/g++.brendan/copy9.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.brendan/copy9.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 copy9.C
*** g++.old-deja/g++.brendan/copy9.C	18 Apr 2012 17:10:43 -0000	1.9
--- g++.old-deja/g++.brendan/copy9.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // GROUPS passed copy-ctors
  #include <iostream>
  
Index: g++.old-deja/g++.brendan/nest21.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.brendan/nest21.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 nest21.C
*** g++.old-deja/g++.brendan/nest21.C	18 Apr 2012 17:10:44 -0000	1.9
--- g++.old-deja/g++.brendan/nest21.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // GROUPS passed nested-classes
  #include <iostream>
  #include <cstdio>
Index: g++.old-deja/g++.brendan/ptolemy2.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.brendan/ptolemy2.C,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 ptolemy2.C
*** g++.old-deja/g++.brendan/ptolemy2.C	18 Apr 2012 17:10:44 -0000	1.10
--- g++.old-deja/g++.brendan/ptolemy2.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // GROUPS passed ptolemy-bugs
  #include <iostream>
  
Index: g++.old-deja/g++.bugs/900227_01.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.bugs/900227_01.C,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 900227_01.C
*** g++.old-deja/g++.bugs/900227_01.C	18 Mar 2009 17:14:49 -0000	1.3
--- g++.old-deja/g++.bugs/900227_01.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do assemble  }
+ // { dg-require-effective-target int32plus }
  // { dg-options "" }
  // g++ 1.37.1 bug 900227_01
  
Index: g++.old-deja/g++.eh/badalloc1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.eh/badalloc1.C,v
retrieving revision 1.13
diff -u -3 -p -c -p -r1.13 badalloc1.C
*** g++.old-deja/g++.eh/badalloc1.C	2 May 2013 21:41:02 -0000	1.13
--- g++.old-deja/g++.eh/badalloc1.C	3 Jun 2013 10:53:25 -0000
***************
*** 3,8 ****
--- 3,9 ----
  // itself call malloc(), and will fail if there is no more
  // memory available.
  // { dg-do run { xfail { { xstormy16-*-* *-*-darwin[3-7]* } || vxworks_rtp } } }
+ // { dg-require-effective-target int32plus }
  // Copyright (C) 2000, 2002, 2003, 2010, 2012 Free Software Foundation, Inc.
  // Contributed by Nathan Sidwell 6 June 2000 <nathan@codesourcery.com>
  
Index: g++.old-deja/g++.jason/2371.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.jason/2371.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 2371.C
*** g++.old-deja/g++.jason/2371.C	18 Apr 2012 17:10:46 -0000	1.9
--- g++.old-deja/g++.jason/2371.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // { dg-options "" }
  # 1 "SetLS.cc"
  // GROUPS passed templates nested-classes
Index: g++.old-deja/g++.jason/template24.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.jason/template24.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 template24.C
*** g++.old-deja/g++.jason/template24.C	18 Apr 2012 17:10:47 -0000	1.9
--- g++.old-deja/g++.jason/template24.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // Bug: g++ doesn't find the conversion from ostream_withassign to ostream.
  
  #include <iostream>
Index: g++.old-deja/g++.jason/template31.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.jason/template31.C,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 template31.C
*** g++.old-deja/g++.jason/template31.C	12 Feb 2010 10:27:33 -0000	1.8
--- g++.old-deja/g++.jason/template31.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // PRMS Id: 8569
  
  #include <iostream>
Index: g++.old-deja/g++.jason/thunk3.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.jason/thunk3.C,v
retrieving revision 1.18
diff -u -3 -p -c -p -r1.18 thunk3.C
*** g++.old-deja/g++.jason/thunk3.C	2 May 2013 21:41:03 -0000	1.18
--- g++.old-deja/g++.jason/thunk3.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,5 ****
--- 1,6 ----
  // { dg-do run }
  // { dg-skip-if "fails with generic thunk support" { rs6000-*-* powerpc-*-eabi v850-*-* sh-*-* sh64-*-* h8*-*-* xtensa*-*-* m32r*-*-* lm32-*-* } { "*" } { "" } }
+ // { dg-skip-if "Uses generic thunks" { "rx-*-*" "rl78-*-*" v850-*-* msp430-*-* } { "*" } { "" } } */
  // Test that variadic function calls using thunks work right.
  // Note that this will break on any target that uses the generic thunk
  //  support, because it doesn't support variadic functions.
Index: g++.old-deja/g++.law/arg8.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.law/arg8.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 arg8.C
*** g++.old-deja/g++.law/arg8.C	18 Apr 2012 17:10:47 -0000	1.9
--- g++.old-deja/g++.law/arg8.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // GROUPS passed arg-matching
  // arg-matching file
  // Message-Id: <9307081747.AA14030@tnt>
Index: g++.old-deja/g++.law/code-gen5.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.law/code-gen5.C,v
retrieving revision 1.12
diff -u -3 -p -c -p -r1.12 code-gen5.C
*** g++.old-deja/g++.law/code-gen5.C	18 Apr 2012 17:10:48 -0000	1.12
--- g++.old-deja/g++.law/code-gen5.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // GROUPS passed code-generation
  // code-gen file
  // From: "David" <norman@pi14.arc.umn.edu>
Index: g++.old-deja/g++.law/ctors12.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.law/ctors12.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 ctors12.C
*** g++.old-deja/g++.law/ctors12.C	18 Apr 2012 17:10:48 -0000	1.9
--- g++.old-deja/g++.law/ctors12.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // GROUPS passed constructors
  #include <cstdio>
  #include <cstdlib>
Index: g++.old-deja/g++.law/cvt2.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.law/cvt2.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 cvt2.C
*** g++.old-deja/g++.law/cvt2.C	18 Apr 2012 17:10:48 -0000	1.9
--- g++.old-deja/g++.law/cvt2.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // GROUPS passed conversions
  #include <cstdio>
  #include <cstdlib>
Index: g++.old-deja/g++.law/virtual3.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.law/virtual3.C,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 virtual3.C
*** g++.old-deja/g++.law/virtual3.C	2 May 2013 21:41:03 -0000	1.11
--- g++.old-deja/g++.law/virtual3.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // GROUPS passed virtual-functions
  // virtual file
  // From: allan@ramjet.multinet.DE (Allan Brighton)
Index: g++.old-deja/g++.mike/eh2.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.mike/eh2.C,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 eh2.C
*** g++.old-deja/g++.mike/eh2.C	2 May 2013 21:41:03 -0000	1.11
--- g++.old-deja/g++.mike/eh2.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run { xfail sparc64-*-elf arm-*-pe } }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-fexceptions" }
  
  #include <cstdlib>
Index: g++.old-deja/g++.mike/net34.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.mike/net34.C,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 net34.C
*** g++.old-deja/g++.mike/net34.C	2 May 2013 21:41:03 -0000	1.11
--- g++.old-deja/g++.mike/net34.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // { dg-options "" }
  
  #include <iostream>
Index: g++.old-deja/g++.mike/net46.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.mike/net46.C,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 net46.C
*** g++.old-deja/g++.mike/net46.C	2 May 2013 21:41:04 -0000	1.11
--- g++.old-deja/g++.mike/net46.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,6 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
+ 
  #include <iostream>
  #include <cstdlib>
  #include <cstddef>
Index: g++.old-deja/g++.mike/ns15.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.mike/ns15.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 ns15.C
*** g++.old-deja/g++.mike/ns15.C	2 May 2013 21:41:04 -0000	1.9
--- g++.old-deja/g++.mike/ns15.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do assemble }
+ // { dg-require-effective-target int32plus }
  // { dg-xfail-if "" { xstormy16-*-* } { "*" } { "" } }
  
  #include <stdio.h>
Index: g++.old-deja/g++.mike/p658.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.mike/p658.C,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 p658.C
*** g++.old-deja/g++.mike/p658.C	2 May 2013 21:41:04 -0000	1.10
--- g++.old-deja/g++.mike/p658.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // prms-id: 658
  
  #include <iostream>
Index: g++.old-deja/g++.other/exprstmt1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.other/exprstmt1.C,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 exprstmt1.C
*** g++.old-deja/g++.other/exprstmt1.C	2 May 2013 21:41:06 -0000	1.8
--- g++.old-deja/g++.other/exprstmt1.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-O" }
  // { dg-error "limited range of data type" "16-bit target" { target xstormy16-*-* } 0 }
  // { dg-error "shift count >=" "16-bit target" { target xstormy16-*-* } 0 }
Index: g++.old-deja/g++.other/headers1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.other/headers1.C,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 headers1.C
*** g++.old-deja/g++.other/headers1.C	2 May 2013 21:41:06 -0000	1.10
--- g++.old-deja/g++.other/headers1.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // Copyright (C) 2000 Free Software Foundation, Inc.
  // Contributed by Loren J. Rittle 07 Jun 2000 <ljrittle@acm.org>
  //
Index: g++.old-deja/g++.other/inline12.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.other/inline12.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 inline12.C
*** g++.old-deja/g++.other/inline12.C	2 May 2013 21:41:06 -0000	1.9
--- g++.old-deja/g++.other/inline12.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do assemble  }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-O2 -g" }
  // (Should preferrably cycle through options.)
  // Origin: Hans-Peter Nilsson <hp@axis.com>
Index: g++.old-deja/g++.other/sibcall1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.other/sibcall1.C,v
retrieving revision 1.12
diff -u -3 -p -c -p -r1.12 sibcall1.C
*** g++.old-deja/g++.other/sibcall1.C	2 May 2013 21:41:07 -0000	1.12
--- g++.old-deja/g++.other/sibcall1.C	3 Jun 2013 10:53:25 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-O2" }
  
  #include <iostream>
Index: g++.old-deja/g++.other/unchanging1.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.other/unchanging1.C,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 unchanging1.C
*** g++.old-deja/g++.other/unchanging1.C	2 May 2013 21:41:07 -0000	1.11
--- g++.old-deja/g++.other/unchanging1.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-O2" }
  
  #include <iostream>
Index: g++.old-deja/g++.pt/crash16.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.pt/crash16.C,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 crash16.C
*** g++.old-deja/g++.pt/crash16.C	2 May 2013 21:41:07 -0000	1.10
--- g++.old-deja/g++.pt/crash16.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do assemble }
+ // { dg-require-effective-target int32plus }
  // { dg-xfail-if "" { xstormy16-*-* } { "*" } { "" } }
  // { dg-options "" }
  
Index: g++.old-deja/g++.robertl/eb115.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.robertl/eb115.C,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 eb115.C
*** g++.old-deja/g++.robertl/eb115.C	2 May 2013 21:41:08 -0000	1.11
--- g++.old-deja/g++.robertl/eb115.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  // { dg-options "-O" }
  
  #include <iostream>
Index: g++.old-deja/g++.robertl/eb21.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.robertl/eb21.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 eb21.C
*** g++.old-deja/g++.robertl/eb21.C	2 May 2013 21:41:08 -0000	1.9
--- g++.old-deja/g++.robertl/eb21.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  #include <vector>
  
  #include <sstream>
Index: g++.old-deja/g++.robertl/eb31.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.robertl/eb31.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 eb31.C
*** g++.old-deja/g++.robertl/eb31.C	2 May 2013 21:41:09 -0000	1.9
--- g++.old-deja/g++.robertl/eb31.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  #include<iostream>
  
  int main() {
Index: g++.old-deja/g++.robertl/eb41.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.robertl/eb41.C,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 eb41.C
*** g++.old-deja/g++.robertl/eb41.C	2 May 2013 21:41:09 -0000	1.11
--- g++.old-deja/g++.robertl/eb41.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  #include <iostream>
  #include <iterator>
  #include <string>
Index: g++.old-deja/g++.robertl/eb46.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.robertl/eb46.C,v
retrieving revision 1.13
diff -u -3 -p -c -p -r1.13 eb46.C
*** g++.old-deja/g++.robertl/eb46.C	2 May 2013 21:41:09 -0000	1.13
--- g++.old-deja/g++.robertl/eb46.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  #include <iostream>
  
  class A1 {
Index: g++.old-deja/g++.robertl/eb54.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.robertl/eb54.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 eb54.C
*** g++.old-deja/g++.robertl/eb54.C	2 May 2013 21:41:09 -0000	1.9
--- g++.old-deja/g++.robertl/eb54.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  #include <iomanip>
  #include <iostream>
  #include <cstdlib>
Index: g++.old-deja/g++.robertl/eb66.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.robertl/eb66.C,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 eb66.C
*** g++.old-deja/g++.robertl/eb66.C	2 May 2013 21:41:09 -0000	1.9
--- g++.old-deja/g++.robertl/eb66.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  #include <cassert>
  #include <iostream>
  
Index: g++.old-deja/g++.robertl/eb73.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.robertl/eb73.C,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 eb73.C
*** g++.old-deja/g++.robertl/eb73.C	2 May 2013 21:41:09 -0000	1.11
--- g++.old-deja/g++.robertl/eb73.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  // { dg-do run  }
  // { dg-options "-O -Wall" }
+ // { dg-require-effective-target int32plus }
  // Depletes VM.
  
  #include <iostream>
Index: g++.old-deja/g++.robertl/eb77.C
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/g++.old-deja/g++.robertl/eb77.C,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 eb77.C
*** g++.old-deja/g++.robertl/eb77.C	2 May 2013 21:41:09 -0000	1.11
--- g++.old-deja/g++.robertl/eb77.C	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  // { dg-do run  }
+ // { dg-require-effective-target int32plus }
  #include <iostream>
  #include <sstream>
  
Index: gcc.c-torture/compile/20000804-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/20000804-1.c,v
retrieving revision 1.14
diff -u -3 -p -c -p -r1.14 20000804-1.c
*** gcc.c-torture/compile/20000804-1.c	2 May 2013 21:41:11 -0000	1.14
--- gcc.c-torture/compile/20000804-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 5,10 ****
--- 5,11 ----
  /* { dg-skip-if "No 64-bit registers" { m32c-*-* } { "*" } { "" } } */
  /* { dg-skip-if "Not enough 64-bit registers" { pdp11-*-* } { "-O0" } { "" } } */
  /* { dg-xfail-if "" { h8300-*-* } { "*" } { "" } } */
+ /* { dg-skip-if "" { rl78-*-* msp430-*-* } { "*" } { "" } } */
  
  /* Copyright (C) 2000, 2003 Free Software Foundation */
  __complex__ long long f ()
Index: gcc.c-torture/compile/20010327-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/20010327-1.c,v
retrieving revision 1.20
diff -u -3 -p -c -p -r1.20 20010327-1.c
*** gcc.c-torture/compile/20010327-1.c	2 May 2013 21:41:11 -0000	1.20
--- gcc.c-torture/compile/20010327-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 2,7 ****
--- 2,8 ----
  /* { dg-skip-if "HI mode pointer for avr" { "avr-*-*" } { "*" } { "" } } */ 
  /* { dg-skip-if "HI mode pointer for pdp11" { "pdp11-*-*" } { "*" } { "" } } */ 
  /* { dg-skip-if "non-SI pointers for w64" { "x86_64-*-mingw*" } { "*" } { "" } } */ 
+ /* { dg-skip-if "non-SI pointers" { msp430-*-* rl78-*-* xstormy16-*-* } { "*" } { "" } } */
  
  /* This testcase tests whether GCC can produce static initialized data
     that references addresses of size 'unsigned long', even if that's not
Index: gcc.c-torture/compile/20010605-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/20010605-1.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 20010605-1.c
*** gcc.c-torture/compile/20010605-1.c	27 Nov 2002 01:03:47 -0000	1.1
--- gcc.c-torture/compile/20010605-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,12 ****
  int
  main (int argc, char **argv)
  {
    int size = 10;
  
!   typedef struct {
      char val[size];
    } block;
!   block retframe_block()
      {
        return *(block*)0;
      }
--- 1,17 ----
+ /* { dg-require-effective-target trampolines } */
+ 
  int
  main (int argc, char **argv)
  {
    int size = 10;
  
!   typedef struct
!   {
      char val[size];
    } block;
! 
!   block
!     retframe_block (void)
      {
        return *(block*)0;
      }
Index: gcc.c-torture/compile/20010903-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/20010903-1.c,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 20010903-1.c
*** gcc.c-torture/compile/20010903-1.c	2 May 2013 21:41:11 -0000	1.3
--- gcc.c-torture/compile/20010903-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
! struct A {
    long a;
  };
  
--- 1,7 ----
! /* { dg-skip-if "asm construct does not work with target" { msp430-*-* rl78-*-* } { "*" } { "" } } */
! 
! struct A
! {
    long a;
  };
  
*************** int baz(void)
*** 19,28 ****
--- 22,33 ----
  {
    int i;
    struct B *j;
+ 
    for (i = 1; i < 32; i++)
      {
        j = &b[i];
        bar(&j->a);
      }
+ 
    return 0;
  }
Index: gcc.c-torture/compile/20011205-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/20011205-1.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 20011205-1.c
*** gcc.c-torture/compile/20011205-1.c	27 Nov 2002 01:03:47 -0000	1.1
--- gcc.c-torture/compile/20011205-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,3 ****
--- 1,4 ----
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  /* Failure to mark_addressable all operands before evaluation means we
     don't set up the proper temporaries, which leaves us with an asm that
     doesn't match its contraints.  */
Index: gcc.c-torture/compile/20020604-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/20020604-1.c,v
retrieving revision 1.20
diff -u -3 -p -c -p -r1.20 20020604-1.c
*** gcc.c-torture/compile/20020604-1.c	2 May 2013 21:41:11 -0000	1.20
--- gcc.c-torture/compile/20020604-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 2,7 ****
--- 2,8 ----
  /* { dg-skip-if "The array is too big" { "avr-*-*" "pdp11-*-*" } { "*" } { "" } } */ 
  /* { dg-xfail-if "The array too big" { "h8300-*-*" } { "-mno-h" "-mn" } { "" } } */
  /* { dg-skip-if "" { m32c-*-* } { } { } } */
+ /* { dg-skip-if "The array is too big" { msp430-*-* rl78-*-* xstormy16-*-* } { "*" } { "" } } */
  
  /* PR c/6957
     This testcase ICEd at -O2 on IA-32, because
Index: gcc.c-torture/compile/20080625-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/20080625-1.c,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 20080625-1.c
*** gcc.c-torture/compile/20080625-1.c	2 May 2013 21:41:12 -0000	1.10
--- gcc.c-torture/compile/20080625-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
  /* { dg-skip-if "too much data" { "avr-*-*" "m32c-*-*" "pdp11-*-*" } { "*" } { "" } } */
! struct peakbufStruct {
      unsigned int lnum [5000];
      int lscan [5000][4000];
      double lmz [5000][4000];
--- 1,8 ----
  /* { dg-skip-if "too much data" { "avr-*-*" "m32c-*-*" "pdp11-*-*" } { "*" } { "" } } */
! /* { dg-skip-if "too much data" { "msp430-*-*" "rl78-*-*" "xstormy16-*-*" } { "*" } { "" } } */
! 
! struct peakbufStruct
! {
      unsigned int lnum [5000];
      int lscan [5000][4000];
      double lmz [5000][4000];
*************** struct peakbufStruct {
*** 9,17 ****
      unsigned char freelistl [5000];
      unsigned int LastFreeL;
  } peakbuf;
  void foo(int);
! void findmzROI(int i, int *p_scan)
  {
!     foo(peakbuf.PeaksInBuf);
!     __builtin_memmove(p_scan, peakbuf.lscan[i], peakbuf.lnum[i]*sizeof(int));
  }
--- 12,23 ----
      unsigned char freelistl [5000];
      unsigned int LastFreeL;
  } peakbuf;
+ 
  void foo(int);
! 
! void
! findmzROI (int i, int *p_scan)
  {
!   foo (peakbuf.PeaksInBuf);
!   __builtin_memmove (p_scan, peakbuf.lscan[i], peakbuf.lnum[i] * sizeof (int));
  }
Index: gcc.c-torture/compile/limits-externdecl.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/limits-externdecl.c,v
retrieving revision 1.4
diff -u -3 -p -c -p -r1.4 limits-externdecl.c
*** gcc.c-torture/compile/limits-externdecl.c	2 May 2013 21:41:13 -0000	1.4
--- gcc.c-torture/compile/limits-externdecl.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,3 ****
--- 1,4 ----
+ /* { dg-skip-if "Too big for a 16-bit target" { "msp430-*-*" } { "*" } { "" } } */
  /* Inspired by the test case for PR middle-end/52640.  */
  
  typedef struct
Index: gcc.c-torture/compile/limits-stringlit.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/limits-stringlit.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 limits-stringlit.c
*** gcc.c-torture/compile/limits-stringlit.c	18 Apr 2012 17:10:59 -0000	1.7
--- gcc.c-torture/compile/limits-stringlit.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-skip-if "Array too big" { avr-*-* picochip-*-* m32c-*-* pdp11-*-* } { "*" } { "" } } */ 
+ /* { dg-skip-if "Does not work with small integer machines" { xstormy16-*-* } { "*" } { "" } } */
  
  #define STR2 "012345678901234567890123456789012345678901234567890123456789\
  0123456789012345678901234567890123456789"
Index: gcc.c-torture/compile/pr27528.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/pr27528.c,v
retrieving revision 1.4
diff -u -3 -p -c -p -r1.4 pr27528.c
*** gcc.c-torture/compile/pr27528.c	10 Mar 2008 10:43:49 -0000	1.4
--- gcc.c-torture/compile/pr27528.c	3 Jun 2013 10:53:26 -0000
*************** insn2 (const void *x)
*** 18,23 ****
--- 18,29 ----
  }
  #endif
  
+ /* This test only works in non-PIC mode.  The dg-options line above tries
+    to make sure of this, but the site.exp file can still add a -fpic or -fPIC
+    to the command line.  (Usually because these are separate multilibs from
+    the non-pic versions).  */
+ #ifndef __pic__
+ 
  void
  foo (void)
  {
*************** foo (void)
*** 38,40 ****
--- 44,48 ----
    asm volatile ("" :: "s" (__FILE__), "i" (__FILE__));
    asm volatile ("" :: "s" (__FUNCTION__), "i" (__FUNCTION__));
  }
+ 
+ #endif
Index: gcc.c-torture/compile/pr35318.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/pr35318.c,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 pr35318.c
*** gcc.c-torture/compile/pr35318.c	31 May 2013 13:58:56 -0000	1.10
--- gcc.c-torture/compile/pr35318.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,8 ----
  /* { dg-skip-if "" { pdp11-*-* } { "*" } { "" } } */
  /* { dg-xfail-if "" { m32c-*-* } { "*" } { "" } } */
+ /* { dg-skip-if "Too many registers needed on 16-bit targets" { "xstormy16-*-*" } { "*" } { "" } } */
+ /* { dg-skip-if "Too many registers needed on 16-bit targets" { "rl78-*-*" } { "*" } { "" } } */
+ 
  /* PR target/35318 */
  
  void
Index: gcc.c-torture/compile/pr39394.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/pr39394.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr39394.c
*** gcc.c-torture/compile/pr39394.c	18 Mar 2009 17:14:51 -0000	1.1
--- gcc.c-torture/compile/pr39394.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,3 ****
--- 1,4 ----
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  /* PR tree-optimization/39394 */
  
  char *p;
Index: gcc.c-torture/compile/pr41181.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/pr41181.c,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 pr41181.c
*** gcc.c-torture/compile/pr41181.c	2 May 2013 21:41:15 -0000	1.10
--- gcc.c-torture/compile/pr41181.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,10 ****
  /* { dg-skip-if "The array is too big" { "avr-*-*" "pdp11-*-*" } { "*" } { "" } } */ 
  char paths[1024];
! static void x264_slicetype_path(char (*best_paths)[250], int n, int length)
  {
      __builtin_memcpy (best_paths[n], paths, length);
  }
! void x264_slicetype_analyse(int n, int length)
  {
      char best_paths[250][250];
      x264_slicetype_path (best_paths, n, length);
--- 1,16 ----
  /* { dg-skip-if "The array is too big" { "avr-*-*" "pdp11-*-*" } { "*" } { "" } } */ 
+ /* { dg-require-effective-target ilp32 } */
+ 
  char paths[1024];
! 
! static void
! x264_slicetype_path (char (*best_paths)[250], int n, int length)
  {
      __builtin_memcpy (best_paths[n], paths, length);
  }
! 
! void
! x264_slicetype_analyse (int n, int length)
  {
      char best_paths[250][250];
      x264_slicetype_path (best_paths, n, length);
Index: gcc.c-torture/compile/pr46637.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/compile/pr46637.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr46637.c
*** gcc.c-torture/compile/pr46637.c	25 Mar 2011 11:22:34 -0000	1.1
--- gcc.c-torture/compile/pr46637.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,3 ****
--- 1,4 ----
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  /* PR middle-end/46637 */
  
  struct S { int s[5]; } *p;
Index: gcc.c-torture/execute/20101011-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/20101011-1.c,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 20101011-1.c
*** gcc.c-torture/execute/20101011-1.c	2 May 2013 21:41:24 -0000	1.10
--- gcc.c-torture/execute/20101011-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 9,14 ****
--- 9,20 ----
  #elif defined (__SPU__)
    /* On SPU division by zero does not trap.  */
  # define DO_TEST 0
+ #elif defined (__v850__)
+   /* On V850 division by zero does not trap.  */
+ # define DO_TEST 0
+ #elif defined (__MSP430__)
+   /* On MSP430 division by zero does not trap.  */
+ # define DO_TEST 0
  #elif defined (__sh__)
    /* On SH division by zero does not trap.  */
  # define DO_TEST 0
Index: gcc.c-torture/execute/ieee/980619-1.x
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/ieee/980619-1.x,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 980619-1.x
*** gcc.c-torture/execute/ieee/980619-1.x	18 Apr 2012 17:11:11 -0000	1.5
--- gcc.c-torture/execute/ieee/980619-1.x	3 Jun 2013 10:53:26 -0000
***************
*** 12,15 ****
--- 12,25 ----
  #        }    
  #}
  
+ set torture_eval_before_execute {
+ 
+     set compiler_conditional_xfail_data {
+         "RX fp rounding isn't pedantic" \
+         "rx-*-*" \
+         { "*" } \
+         { "-m64bit-doubles" }
+         }    
+ }
+ 
  return 0
Index: gcc.c-torture/execute/ieee/compare-fp-1.x
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/ieee/compare-fp-1.x,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 compare-fp-1.x
*** gcc.c-torture/execute/ieee/compare-fp-1.x	18 Apr 2012 17:11:12 -0000	1.8
--- gcc.c-torture/execute/ieee/compare-fp-1.x	3 Jun 2013 10:53:26 -0000
*************** if [istarget "spu-*-*"] {
*** 3,6 ****
--- 3,10 ----
      # support Nan & Inf. 
      return 1
  }
+ if [istarget "rx-*-*"] {
+   # Similarly for RX
+   return 1
+ }
  return 0
Index: gcc.c-torture/execute/ieee/mul-subnormal-single-1.x
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/ieee/mul-subnormal-single-1.x,v
retrieving revision 1.12
diff -u -3 -p -c -p -r1.12 mul-subnormal-single-1.x
*** gcc.c-torture/execute/ieee/mul-subnormal-single-1.x	2 May 2013 21:41:32 -0000	1.12
--- gcc.c-torture/execute/ieee/mul-subnormal-single-1.x	3 Jun 2013 10:53:26 -0000
*************** if { [istarget "tic6x-*-*"] && [check_ef
*** 18,21 ****
--- 18,32 ----
      set torture_execute_xfail "tic6x-*-*"
      return 1
  }
+ if [istarget "rx-*-*"] {
+   set torture_eval_before_execute {
+     global compiler_conditional_xfail_data
+     set compiler_conditional_xfail_data {
+         "RX fp isnsn do not handle denorms" \
+         "rx-*-*" \
+         { "*" } \
+         { "-m64bit-doubles" }
+     }
+   }
+ }
  return 0
Index: gcc.c-torture/execute/ieee/pr38016.x
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/ieee/pr38016.x,v
retrieving revision 1.6
diff -u -3 -p -c -p -r1.6 pr38016.x
*** gcc.c-torture/execute/ieee/pr38016.x	18 Apr 2012 17:11:13 -0000	1.6
--- gcc.c-torture/execute/ieee/pr38016.x	3 Jun 2013 10:53:26 -0000
***************
*** 1,2 ****
--- 1,14 ----
+ if [istarget "rx-*-*"] {
+   set torture_eval_before_execute {
+     global compiler_conditional_xfail_data
+     set compiler_conditional_xfail_data {
+         "RX fp isnsn do not handle denorms" \
+         "rx-*-*" \
+         { "*" } \
+         { "-m64bit-doubles" }
+     }
+   }
+ }
+ 
  lappend additional_flags "-fno-ivopts" "-fno-gcse"
  return 0
Index: gcc.c-torture/execute/ieee/rbug.x
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/ieee/rbug.x,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 rbug.x
*** gcc.c-torture/execute/ieee/rbug.x	18 Apr 2012 17:11:14 -0000	1.8
--- gcc.c-torture/execute/ieee/rbug.x	3 Jun 2013 10:53:26 -0000
*************** if [istarget "avr-*-*"] {
*** 7,10 ****
--- 7,20 ----
      # AVR doubles are floats
      return 1
  }
+ set torture_eval_before_execute {
+ 
+     set compiler_conditional_xfail_data {
+         "RX uses 32-bit doubles by default" \
+         "rx-*-*" \
+         { "-O0" "-O1" } \
+         { "-m64bit-doubles" }
+         }    
+ }
+ 
  return 0
Index: gcc.c-torture/execute/ieee/unsafe-fp-assoc-1.x
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/execute/ieee/unsafe-fp-assoc-1.x,v
retrieving revision 1.6
diff -u -3 -p -c -p -r1.6 unsafe-fp-assoc-1.x
*** gcc.c-torture/execute/ieee/unsafe-fp-assoc-1.x	14 Jul 2011 11:03:58 -0000	1.6
--- gcc.c-torture/execute/ieee/unsafe-fp-assoc-1.x	3 Jun 2013 10:53:26 -0000
*************** if [istarget "avr-*-*"] {
*** 2,5 ****
--- 2,8 ----
      # AVR doubles are floats
      return 1
  }
+ if { [istarget "rx-*-*"] } {
+ 	set torture_execute_xfail "rx-*-*"
+ }
  return 0
Index: gcc.c-torture/unsorted/DFcmp.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/DFcmp.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 DFcmp.c
*** gcc.c-torture/unsorted/DFcmp.c	18 Apr 2012 17:11:14 -0000	1.2
--- gcc.c-torture/unsorted/DFcmp.c	3 Jun 2013 10:53:26 -0000
*************** type glob0, glob1;
*** 22,27 ****
--- 22,38 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  reg0reg1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (reg0 <= reg1) return 1; else return 0;}
Index: gcc.c-torture/unsorted/HIcmp.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/HIcmp.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 HIcmp.c
*** gcc.c-torture/unsorted/HIcmp.c	18 Apr 2012 17:11:14 -0000	1.2
--- gcc.c-torture/unsorted/HIcmp.c	3 Jun 2013 10:53:26 -0000
*************** type glob0, glob1;
*** 22,27 ****
--- 22,38 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  reg0reg1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (reg0 <= reg1) return 1; else return 0;}
*************** type r0, r1;  type *p0, *p1;
*** 277,280 ****
  regx0regx1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (regx0 <= regx1) return 1; else return 0;}
- 
--- 288,290 ----
Index: gcc.c-torture/unsorted/HIset.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/HIset.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 HIset.c
*** gcc.c-torture/unsorted/HIset.c	18 Apr 2012 17:11:14 -0000	1.2
--- gcc.c-torture/unsorted/HIset.c	3 Jun 2013 10:53:26 -0000
***************
*** 18,23 ****
--- 18,34 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  int glob0, glob1;
  
  #define type short
*************** type r0, r1;  type *p0, *p1;
*** 213,216 ****
  regx0regx1_set (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {regx0 = regx1;  }
- 
--- 224,226 ----
Index: gcc.c-torture/unsorted/QIcmp.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/QIcmp.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 QIcmp.c
*** gcc.c-torture/unsorted/QIcmp.c	27 Nov 2002 01:03:52 -0000	1.1
--- gcc.c-torture/unsorted/QIcmp.c	3 Jun 2013 10:53:26 -0000
*************** type glob0, glob1;
*** 22,27 ****
--- 22,38 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  reg0reg1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (reg0 <= reg1) return 1; else return 0;}
*************** type r0, r1;  type *p0, *p1;
*** 277,280 ****
  regx0regx1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (regx0 <= regx1) return 1; else return 0;}
- 
--- 288,290 ----
Index: gcc.c-torture/unsorted/QIset.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/QIset.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 QIset.c
*** gcc.c-torture/unsorted/QIset.c	27 Nov 2002 01:03:52 -0000	1.1
--- gcc.c-torture/unsorted/QIset.c	3 Jun 2013 10:53:26 -0000
***************
*** 18,23 ****
--- 18,34 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  int glob0, glob1;
  
  #define type char
*************** type r0, r1;  type *p0, *p1;
*** 213,216 ****
  regx0regx1_set (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {regx0 = regx1;  }
- 
--- 224,226 ----
Index: gcc.c-torture/unsorted/SFset.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/SFset.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 SFset.c
*** gcc.c-torture/unsorted/SFset.c	18 Apr 2012 17:11:14 -0000	1.2
--- gcc.c-torture/unsorted/SFset.c	3 Jun 2013 10:53:26 -0000
***************
*** 18,23 ****
--- 18,34 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  int glob0, glob1;
  
  #define type float
*************** type r0, r1;  type *p0, *p1;
*** 213,216 ****
  regx0regx1_set (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {regx0 = regx1;  }
- 
--- 224,226 ----
Index: gcc.c-torture/unsorted/SIcmp.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/SIcmp.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 SIcmp.c
*** gcc.c-torture/unsorted/SIcmp.c	18 Apr 2012 17:11:14 -0000	1.2
--- gcc.c-torture/unsorted/SIcmp.c	3 Jun 2013 10:53:26 -0000
*************** type glob0, glob1;
*** 22,27 ****
--- 22,38 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  reg0reg1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (reg0 <= reg1) return 1; else return 0;}
*************** type r0, r1;  type *p0, *p1;
*** 277,280 ****
  regx0regx1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (regx0 <= regx1) return 1; else return 0;}
- 
--- 288,290 ----
Index: gcc.c-torture/unsorted/SIset.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/SIset.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 SIset.c
*** gcc.c-torture/unsorted/SIset.c	18 Apr 2012 17:11:14 -0000	1.2
--- gcc.c-torture/unsorted/SIset.c	3 Jun 2013 10:53:26 -0000
***************
*** 18,23 ****
--- 18,34 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  int glob0, glob1;
  
  #define type int
*************** type r0, r1;  type *p0, *p1;
*** 213,216 ****
  regx0regx1_set (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {regx0 = regx1;  }
- 
--- 224,226 ----
Index: gcc.c-torture/unsorted/UHIcmp.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/UHIcmp.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 UHIcmp.c
*** gcc.c-torture/unsorted/UHIcmp.c	18 Apr 2012 17:11:14 -0000	1.2
--- gcc.c-torture/unsorted/UHIcmp.c	3 Jun 2013 10:53:26 -0000
*************** type glob0, glob1;
*** 22,27 ****
--- 22,38 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  reg0reg1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (reg0 <= reg1) return 1; else return 0;}
*************** type r0, r1;  type *p0, *p1;
*** 277,280 ****
  regx0regx1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (regx0 <= regx1) return 1; else return 0;}
- 
--- 288,290 ----
Index: gcc.c-torture/unsorted/UQIcmp.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/UQIcmp.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 UQIcmp.c
*** gcc.c-torture/unsorted/UQIcmp.c	27 Nov 2002 01:03:52 -0000	1.1
--- gcc.c-torture/unsorted/UQIcmp.c	3 Jun 2013 10:53:26 -0000
*************** type glob0, glob1;
*** 22,27 ****
--- 22,38 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  reg0reg1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (reg0 <= reg1) return 1; else return 0;}
*************** type r0, r1;  type *p0, *p1;
*** 277,280 ****
  regx0regx1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (regx0 <= regx1) return 1; else return 0;}
- 
--- 288,290 ----
Index: gcc.c-torture/unsorted/USIcmp.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.c-torture/unsorted/USIcmp.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 USIcmp.c
*** gcc.c-torture/unsorted/USIcmp.c	18 Apr 2012 17:11:14 -0000	1.2
--- gcc.c-torture/unsorted/USIcmp.c	3 Jun 2013 10:53:26 -0000
*************** type glob0, glob1;
*** 22,27 ****
--- 22,38 ----
  #define adrx1 (E1[x1])
  #define regx1 (p1[x1])
  
+ #if __SIZEOF_INT__ <= 2
+ #undef  E0
+ #define E0      ((type *)10000)
+ #undef  adrreg0
+ #define adrreg0 (p0[10000])
+ #undef  E1
+ #define E1      ((type *)(1111 & ~(__alignof__ (type) - 1)))
+ #undef  adrreg1
+ #define adrreg1 (p1[1111/4])
+ #endif
+ 
  reg0reg1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (reg0 <= reg1) return 1; else return 0;}
*************** type r0, r1;  type *p0, *p1;
*** 277,280 ****
  regx0regx1 (r0, r1, x0, x1, p0, p1)
  type r0, r1;  type *p0, *p1;
  {if (regx0 <= regx1) return 1; else return 0;}
- 
--- 288,290 ----
Index: gcc.dg/20020312-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/20020312-2.c,v
retrieving revision 1.22
diff -u -3 -p -c -p -r1.22 20020312-2.c
*** gcc.dg/20020312-2.c	2 May 2013 21:41:33 -0000	1.22
--- gcc.dg/20020312-2.c	3 Jun 2013 10:53:26 -0000
*************** extern void abort (void);
*** 32,37 ****
--- 32,39 ----
  # define PIC_REG  "ebx"
  #elif defined(__ia64__)
  /* PIC register is r1, but is used even without -fpic.  */
+ #elif defined(__iq2000__)
+ /* No pic register.  */
  #elif defined(__lm32__)
  /* No pic register.  */
  #elif defined(__M32R__)
*************** extern void abort (void);
*** 52,57 ****
--- 54,61 ----
  /* No pic register.  */
  #elif defined(__moxie__)
  /* No pic register.  */
+ #elif defined(__MSP430__)
+ /* No pic register.  */
  #elif defined(__hppa__)
  /* PIC register is %r27 or %r19, but is used even without -fpic.  */
  #elif defined(__pdp11__)
*************** extern void abort (void);
*** 62,67 ****
--- 66,73 ----
  # else
  #  define PIC_REG  "30"
  # endif
+ #elif defined(__RL78__)
+ /* No pic register.  */
  #elif defined(__RX__)
  /* No pic register.  */
  #elif defined(__s390__)
Index: gcc.dg/20021014-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/20021014-1.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 20021014-1.c
*** gcc.dg/20021014-1.c	12 Feb 2010 10:27:35 -0000	1.7
--- gcc.dg/20021014-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 2,7 ****
--- 2,8 ----
  /* { dg-require-profiling "-p" } */
  /* { dg-options "-O2 -p" } */
  /* { dg-options "-O2 -p -static" { target hppa*-*-hpux* } } */
+ /* { dg-skip-if "no profiling support" { "msp430-*-*" } { "*" } { "" } } */
  /* { dg-error "profiler" "No profiler support" { target xstormy16-*-* } 0 } */
  /* { dg-message "" "consider using `-pg' instead of `-p' with gprof(1)" { target *-*-freebsd* } 0 } */
  
Index: gcc.dg/Wconversion-real-integer.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/Wconversion-real-integer.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 Wconversion-real-integer.c
*** gcc.dg/Wconversion-real-integer.c	25 Mar 2011 11:22:40 -0000	1.7
--- gcc.dg/Wconversion-real-integer.c	3 Jun 2013 10:53:26 -0000
***************
*** 4,11 ****
--- 4,13 ----
  /* { dg-do compile }
  /* { dg-skip-if "doubles are floats,ints are 16bits" { "avr-*-*" } { "*" } { "" } } */
  /* { dg-options "-std=c99 -Wconversion" } */
+ /* { dg-options "-m64bit-doubles -std=c99 -Wconversion" { target rx-*-* } } */
  /* { dg-require-effective-target int32plus } */
  /* { dg-require-effective-target double64plus } */
+ 
  #include <limits.h>
  
  void fsi (signed int x);
Index: gcc.dg/Wdouble-promotion.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/Wdouble-promotion.c,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 Wdouble-promotion.c
*** gcc.dg/Wdouble-promotion.c	2 May 2013 21:41:36 -0000	1.5
--- gcc.dg/Wdouble-promotion.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-skip-if "sizeof float == sizeof double, so some of the warnings are not generated" { msp430*-*-* } "*" "" } */
  /* { dg-options "-Wdouble-promotion" } */
  
  #include <stddef.h>
Index: gcc.dg/asm-4.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/asm-4.c,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 asm-4.c
*** gcc.dg/asm-4.c	2 May 2013 21:41:37 -0000	1.3
--- gcc.dg/asm-4.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-skip-if "unsupported operand format" { msp430-*-* rl78-*-* } { "*" } { "" } } */
  /* { dg-options "" } */
  
  int main()
Index: gcc.dg/asm-9.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/asm-9.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 asm-9.c
*** gcc.dg/asm-9.c	8 Feb 2005 16:50:13 -0000	1.1
--- gcc.dg/asm-9.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR inline-asm/15740 */
  /* { dg-do compile } */
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  /* { dg-options "-O" } */
  
  void foo(void)
Index: gcc.dg/builtin-apply2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/builtin-apply2.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 builtin-apply2.c
*** gcc.dg/builtin-apply2.c	2 May 2013 21:41:38 -0000	1.8
--- gcc.dg/builtin-apply2.c	3 Jun 2013 10:53:26 -0000
***************
*** 8,13 ****
--- 8,17 ----
  /* Verify that __builtin_apply behaves correctly on targets
     with pre-pushed arguments (e.g. SPARC).  */
  
+ /* Note: fails on RX because:
+      a) 64 is too many bytes and __builtin_apply() copies off the end of the stack.
+      b) The whacky ABI does not put parameters of type "double" where gcc expects them.  */
+ /* { dg-do run { xfail rx-*-* } } */
  
  
  #define INTEGER_ARG  5
Index: gcc.dg/c90-const-expr-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/c90-const-expr-2.c,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 c90-const-expr-2.c
*** gcc.dg/c90-const-expr-2.c	12 Feb 2010 10:27:35 -0000	1.5
--- gcc.dg/c90-const-expr-2.c	3 Jun 2013 10:53:26 -0000
***************
*** 3,8 ****
--- 3,9 ----
  */
  /* Origin: Joseph Myers <jsm28@cam.ac.uk> */
  /* { dg-do compile } */
+ /* { dg-skip-if "pointers are not power-of-2 in size" { "msp430-*-*" } { "-mlarge" } { "" } } */
  /* { dg-options "-std=iso9899:1990" } */
  /* Note: not using -pedantic since the -std option alone should be enough
     to give the correct behavior to conforming programs.  If -pedantic is
Index: gcc.dg/c99-const-expr-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/c99-const-expr-2.c,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 c99-const-expr-2.c
*** gcc.dg/c99-const-expr-2.c	12 Feb 2010 10:27:35 -0000	1.5
--- gcc.dg/c99-const-expr-2.c	3 Jun 2013 10:53:26 -0000
*************** long *c;
*** 21,26 ****
--- 21,31 ----
  #else
  #define ZERO 0
  #endif
+ #ifdef __MSP430X_LARGE__
+ /* The MSP430 in LARGE mode has 20-bit pointers and 16-bit integers.
+    Thus you cannot assign an integer to a pointer without a cast.  */
+ #undef  ZERO
+ #define ZERO (void *) 0
  
  /* Assertion that n is a null pointer constant: so the conditional expression
     has type 'int *' instead of 'void *'.
Index: gcc.dg/c99-intconst-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/c99-intconst-1.c,v
retrieving revision 1.4
diff -u -3 -p -c -p -r1.4 c99-intconst-1.c
*** gcc.dg/c99-intconst-1.c	8 Feb 2005 17:35:07 -0000	1.4
--- gcc.dg/c99-intconst-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 2,7 ****
--- 2,8 ----
  
  /* Origin: Joseph Myers <jsm28@cam.ac.uk>.  */
  /* { dg-do compile } */
+ /* { dg-skip-if "too many local objects" { rl78-*-* } "*" "" } */
  /* { dg-options "-std=iso9899:1999 -pedantic-errors" } */
  
  #include <limits.h>
Index: gcc.dg/c99-stdint-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/c99-stdint-1.c,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 c99-stdint-1.c
*** gcc.dg/c99-stdint-1.c	2 May 2013 21:41:43 -0000	1.9
--- gcc.dg/c99-stdint-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 8,13 ****
--- 8,14 ----
     reported to maintainer of that copy if still present in the latest
     version).  */
  /* { dg-do compile } */
+ /* { dg-require-effective-target ilp32 } */
  /* { dg-options "-std=iso9899:1999 -pedantic-errors -fhosted" } */
  
  #include <limits.h>
Index: gcc.dg/c99-stdint-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/c99-stdint-2.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 c99-stdint-2.c
*** gcc.dg/c99-stdint-2.c	2 May 2013 21:41:43 -0000	1.8
--- gcc.dg/c99-stdint-2.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,8 ****
--- 1,10 ----
  /* Verify that <stdint.h> is present and follows the C99 requirements.
     Freestanding version.  */
  /* { dg-do compile } */
+ /* { dg-require-effective-target ilp32 } */
  /* { dg-options "-std=iso9899:1999 -pedantic-errors -ffreestanding" } */
  /* { dg-xfail-if "ptrdiff size is 16bits" { avr-*-* } } */
+ /* { dg-require-effective-target ilp32 } */
  /* The test is that there are no diagnostics, so just include the
     hosted version.  */
  #include "c99-stdint-1.c"
Index: gcc.dg/ftrapv-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/ftrapv-1.c,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 ftrapv-1.c
*** gcc.dg/ftrapv-1.c	2 May 2013 21:41:48 -0000	1.9
--- gcc.dg/ftrapv-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 6,11 ****
--- 6,12 ----
     Written by Falk Hueffner, 20th May 2004.  */
  
  /* { dg-do run } */
+ /* { dg-skip-if "trapping arithmetic not supported" { msp430-*-* rl78-*-* } "*" "" } */
  /* { dg-options "-ftrapv" } */
  
  __attribute__((noinline)) int
Index: gcc.dg/ftrapv-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/ftrapv-2.c,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 ftrapv-2.c
*** gcc.dg/ftrapv-2.c	2 May 2013 21:41:48 -0000	1.9
--- gcc.dg/ftrapv-2.c	3 Jun 2013 10:53:26 -0000
***************
*** 7,12 ****
--- 7,13 ----
     Written by Eric Botcazou  */
  
  /* { dg-do run } */
+ /* { dg-skip-if "trapping arithmetic not supported" { msp430-*-* rl78-*-* } "*" "" } */
  /* { dg-options "-ftrapv" } */
  
  extern void abort(void);
Index: gcc.dg/ftrapv-3.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/ftrapv-3.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 ftrapv-3.c
*** gcc.dg/ftrapv-3.c	18 Apr 2012 17:11:28 -0000	1.1
--- gcc.dg/ftrapv-3.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-skip-if "trapping arithmetic not supported" { msp430-*-* rl78-*-* } "*" "" } */
  /* { dg-options "-ftrapv" } */
  
  extern void abort (void);
Index: gcc.dg/large-size-array-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/large-size-array-2.c,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 large-size-array-2.c
*** gcc.dg/large-size-array-2.c	2 May 2013 21:41:49 -0000	1.10
--- gcc.dg/large-size-array-2.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,7 ****
  /* PR c/25309 */
  /* { dg-do compile } */
  /* { dg-options "-O2" } */
! static char * name[] = {
!     [0x80000000]  = "bar"
!   };
! /* { dg-error "too large" "" { target { { ! lp64 } && { ! llp64 } } }  6 } */
--- 1,10 ----
  /* PR c/25309 */
  /* { dg-do compile } */
+ /* { dg-require-effective-target ilp32 } */
  /* { dg-options "-O2" } */
! 
! static char * name[] =
! {
!   [0x80000000]  = "bar"
! };
! /* { dg-error "too large" "" { target { { ! lp64 } && { ! llp64 } } }  9 } */
Index: gcc.dg/large-size-array-4.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/large-size-array-4.c,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 large-size-array-4.c
*** gcc.dg/large-size-array-4.c	2 May 2013 21:41:49 -0000	1.9
--- gcc.dg/large-size-array-4.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,7 ****
  /* PR c/25309 */
  /* { dg-do compile } */
  /* { dg-options "" } */
! static char * name[] = {
!     [0x80000000]  = "bar"
!   };
! /* { dg-error "too large" "" { target { { ! lp64 } && { ! llp64 } } }  6 } */
--- 1,10 ----
  /* PR c/25309 */
  /* { dg-do compile } */
+ /* { dg-require-effective-target ilp32 } */
  /* { dg-options "" } */
! 
! static char * name[] =
! {
!   [0x80000000]  = "bar"
! };
! /* { dg-error "too large" "" { target { { ! lp64 } && { ! llp64 } } }  9 } */
Index: gcc.dg/large-size-array.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/large-size-array.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 large-size-array.c
*** gcc.dg/large-size-array.c	18 Mar 2009 17:14:52 -0000	1.2
--- gcc.dg/large-size-array.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-skip-if "too big for large memory model" { "msp430-*-*" } { "-mlarge" } { "" } } */
  #include <limits.h>
  
  #if defined(__LP64__) || defined(_WIN64)
Index: gcc.dg/max-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/max-1.c,v
retrieving revision 1.13
diff -u -3 -p -c -p -r1.13 max-1.c
*** gcc.dg/max-1.c	2 May 2013 21:41:50 -0000	1.13
--- gcc.dg/max-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 6,11 ****
--- 6,12 ----
     supported in the compiler beginning with GCC 4.3.  */
  /* m32c has varying sized pointers */
  /* { dg-skip-if "" { "m32c-*-*" } { "*" } { "-mcpu=m32c" "-mcpu=m32cm" } } */
+ /* { dg-skip-if "pointers are not power-of-2 in size" { "msp430-*-*" } { "-mlarge" } { "" } } */
  
  __extension__ typedef __INTPTR_TYPE__ intptr_t;
  
Index: gcc.dg/nest.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/nest.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 nest.c
*** gcc.dg/nest.c	10 Mar 2008 10:43:50 -0000	1.8
--- gcc.dg/nest.c	3 Jun 2013 10:53:26 -0000
***************
*** 3,8 ****
--- 3,9 ----
  /* { dg-require-profiling "-pg" } */
  /* { dg-options "-O2 -pg" } */
  /* { dg-options "-O2 -pg -static" { target hppa*-*-hpux* } } */
+ /* { dg-skip-if "no profiling support" { "msp430-*-*" } { "*" } { "" } } */
  /* { dg-error "profiler" "No profiler support" { target xstormy16-*-* } 0 } */
  
  extern void abort (void);
Index: gcc.dg/nested-func-4.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/nested-func-4.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 nested-func-4.c
*** gcc.dg/nested-func-4.c	10 Mar 2008 10:43:50 -0000	1.2
--- gcc.dg/nested-func-4.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,7 ****
--- 1,9 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target trampolines } */
  /* { dg-options "-pg" } */
  /* { dg-options "-pg -static" { target hppa*-*-hpux* } } */
  /* { dg-require-profiling "-pg" } */
+ /* { dg-skip-if "no profiling support" { "msp430-*-*" } { "*" } { "" } } */
  
  extern void abort(void);
  
Index: gcc.dg/non-local-goto-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/non-local-goto-1.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 non-local-goto-1.c
*** gcc.dg/non-local-goto-1.c	31 Oct 2006 15:29:53 -0000	1.1
--- gcc.dg/non-local-goto-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target trampolines } */
  /* { dg-options "-O2" } */
  
  extern void abort (void);
Index: gcc.dg/pr18241-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr18241-1.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 pr18241-1.c
*** gcc.dg/pr18241-1.c	18 Mar 2009 17:14:52 -0000	1.7
--- gcc.dg/pr18241-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-std=gnu99 -Wall -Wextra -O1" } */ 
  
  extern void *memset (void*, int, __SIZE_TYPE__);
Index: gcc.dg/pr19340.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr19340.c,v
retrieving revision 1.19
diff -u -3 -p -c -p -r1.19 pr19340.c
*** gcc.dg/pr19340.c	2 May 2013 21:41:52 -0000	1.19
--- gcc.dg/pr19340.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-require-effective-target scheduling } */
  /* { dg-options "-O1 -fschedule-insns2 -fsched2-use-superblocks" } */
  /* { dg-skip-if "No scheduling" { mmix-*-* cris-*-* crisv32-*-* fido-*-* m68k-*-* m32c-*-* avr-*-* moxie-*-* } { "*" } { "" } } */
  
Index: gcc.dg/pr19345.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr19345.c,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 pr19345.c
*** gcc.dg/pr19345.c	15 Apr 2005 07:55:17 -0000	1.3
--- gcc.dg/pr19345.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* We shouldn't crash trying to produce the inlined structure type die debug info.  */
  /* { dg-do compile } */
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  /* { dg-options "-O1 -g" } */
  inline void bar(char a[], unsigned int l)
  {
Index: gcc.dg/pr27301.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr27301.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr27301.c
*** gcc.dg/pr27301.c	10 Mar 2008 12:31:11 -0000	1.1
--- gcc.dg/pr27301.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR c/27301 */
  /* { dg-do compile } */
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  /* { dg-options "-O2 -std=gnu89" } */
  
  void
Index: gcc.dg/pr28796-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr28796-2.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 pr28796-2.c
*** gcc.dg/pr28796-2.c	2 May 2013 21:41:52 -0000	1.7
--- gcc.dg/pr28796-2.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-skip-if "unsafe maths does not support Inf/NaN" { "rx-*-*" } { "*" } { "-m64bit-doubles" } } */
  /* { dg-options "-O2 -funsafe-math-optimizations -fno-finite-math-only -DUNSAFE" } */
  /* { dg-add-options ieee } */
  /* { dg-skip-if "No Inf/NaN support" { spu-*-* } } */
Index: gcc.dg/pr30286.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr30286.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 pr30286.c
*** gcc.dg/pr30286.c	2 May 2013 21:41:52 -0000	1.7
--- gcc.dg/pr30286.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR middle-end/30286 */
  /* { dg-do run } */
+ /* { dg-skip-if "trapping arithmetic not supported" { msp430-*-* rl78-*-* } "*" "" } */
  /* { dg-options "-O2 -ftrapv" } */
  
  extern void abort (void);
Index: gcc.dg/pr31529-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr31529-1.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 pr31529-1.c
*** gcc.dg/pr31529-1.c	25 Mar 2011 11:22:47 -0000	1.2
--- gcc.dg/pr31529-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,6 ****
  /* { dg-do link } */
  /* { dg-require-effective-target lto } */
! /* { dg-options "-flto" } */
  /* { dg-additional-sources "pr31529-2.c" } */
  
  getline ()
--- 1,6 ----
  /* { dg-do link } */
  /* { dg-require-effective-target lto } */
! /* { dg-options "-flto -O2" } */
  /* { dg-additional-sources "pr31529-2.c" } */
  
  getline ()
Index: gcc.dg/pr32450.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr32450.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 pr32450.c
*** gcc.dg/pr32450.c	10 Mar 2008 10:43:50 -0000	1.2
--- gcc.dg/pr32450.c	3 Jun 2013 10:53:26 -0000
***************
*** 2,7 ****
--- 2,8 ----
  
  /* { dg-do run } */
  /* { dg-require-profiling "-pg" } */
+ /* { dg-skip-if "no profiling support" { "msp430-*-*" } { "*" } { "" } } */
  /* { dg-options "-O2 -pg" } */
  /* { dg-options "-O2 -pg -mtune=core2" { target { i?86-*-* x86_64-*-* } } } */
  /* { dg-options "-O2 -pg -static" { target hppa*-*-hpux* } } */
Index: gcc.dg/pr35258.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr35258.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr35258.c
*** gcc.dg/pr35258.c	7 Apr 2008 08:13:53 -0000	1.1
--- gcc.dg/pr35258.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* { dg-do run } */
  /* { dg-options "-O1" } */
+ /* { dg-require-effective-target int32plus } */
  
  extern void *memcpy (void *, const void *, __SIZE_TYPE__);
  extern int memcmp (const void *, const void *, __SIZE_TYPE__);
Index: gcc.dg/pr36998.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr36998.c,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 pr36998.c
*** gcc.dg/pr36998.c	2 May 2013 21:41:52 -0000	1.9
--- gcc.dg/pr36998.c	3 Jun 2013 10:53:26 -0000
***************
*** 2,8 ****
  /* { dg-do compile } */
  /* { dg-options "-Os -fasynchronous-unwind-tables" } */
  /* { dg-options "-Os -mpreferred-stack-boundary=2 -fasynchronous-unwind-tables" { target { { i?86-*-* x86_64-*-* } && ia32 } } } */
! /* { dg-options "-fno-omit-frame-pointer" { target { avr-*-* } } } */
  
  void foo (const char *, ...) __attribute__ ((noreturn));
  int bar (const char *, ...);
--- 2,8 ----
  /* { dg-do compile } */
  /* { dg-options "-Os -fasynchronous-unwind-tables" } */
  /* { dg-options "-Os -mpreferred-stack-boundary=2 -fasynchronous-unwind-tables" { target { { i?86-*-* x86_64-*-* } && ia32 } } } */
! /* { dg-options "-fno-omit-frame-pointer" { target { avr-*-* xstormy16-*-* } } } */
  
  void foo (const char *, ...) __attribute__ ((noreturn));
  int bar (const char *, ...);
Index: gcc.dg/pr37544.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr37544.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 pr37544.c
*** gcc.dg/pr37544.c	18 Apr 2012 17:11:34 -0000	1.7
--- gcc.dg/pr37544.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target double64plus } */
  /* { dg-options "-O2" } */
  /* { dg-options "-O2 -msse2 -mtune=core2 -mfpmath=387" { target { i?86-*-* x86_64-*-* } } } */
  /* { dg-require-effective-target sse2_runtime { target { i?86-*-* x86_64-*-* } } } */
Index: gcc.dg/pr38364.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr38364.c,v
retrieving revision 1.6
diff -u -3 -p -c -p -r1.6 pr38364.c
*** gcc.dg/pr38364.c	2 May 2013 21:41:53 -0000	1.6
--- gcc.dg/pr38364.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR middle-end/38364 */
  /* { dg-do run } */
+ /* { dg-skip-if "trapping arithmetic not supported" { msp430-*-* rl78-*-* } "*" "" } */
  /* { dg-options "-O2 -ftrapv" } */
  
  extern void abort (void);
Index: gcc.dg/pr41340.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr41340.c,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 pr41340.c
*** gcc.dg/pr41340.c	18 Apr 2012 17:11:35 -0000	1.3
--- gcc.dg/pr41340.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR debug/41340 */
  /* { dg-do compile } */
+ /* { dg-require-effective-target ia32 } */
  /* { dg-options "-O3 -g -fcompare-debug" } */
  /* { dg-options "-O3 -g -fcompare-debug -march=i686" { target { { i?86-*-* x86_64-*-* } && ia32 } } } */
  /* { dg-skip-if "no long pointers" {  { ! ilp32 } && { ! lp64 } } } */
Index: gcc.dg/pr41551.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr41551.c,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 pr41551.c
*** gcc.dg/pr41551.c	2 May 2013 21:41:53 -0000	1.3
--- gcc.dg/pr41551.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-require-effective-target ilp32 } */
  /* { dg-options "-O2" } */
  
  /* Make sure we do not ICE.  */
Index: gcc.dg/pr43643.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr43643.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 pr43643.c
*** gcc.dg/pr43643.c	21 Jun 2010 15:20:02 -0000	1.2
--- gcc.dg/pr43643.c	3 Jun 2013 10:53:26 -0000
***************
*** 2,7 ****
--- 2,8 ----
  
  /* { dg-do run } */
  /* { dg-require-profiling "-pg" } */
+ /* { dg-skip-if "no profiling support" { "msp430-*-*" } { "*" } { "" } } */
  /* { dg-options "-O2 -pg" } */
  /* { dg-options "-O2 -pg -static" { target hppa*-*-hpux* } } */
  
Index: gcc.dg/pr53265.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/pr53265.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr53265.c
*** gcc.dg/pr53265.c	2 May 2013 21:42:04 -0000	1.1
--- gcc.dg/pr53265.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR tree-optimization/53265 */
  /* { dg-do compile } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-O2 -Wall" } */
  
  void bar (void *);
Index: gcc.dg/sms-10.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/sms-10.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 sms-10.c
*** gcc.dg/sms-10.c	18 Apr 2012 17:11:47 -0000	1.1
--- gcc.dg/sms-10.c	3 Jun 2013 10:53:26 -0000
*************** main ()
*** 92,99 ****
--- 92,103 ----
    for (i = 0; i < 100; i++)
      {
        b[i] = (struct df_reg_info *) malloc (s);
+       if (b[i] == 0)
+ 	return 0;
        b[i]->n_refs = i;
        c[i] = (struct df_reg_info *) malloc (s);
+       if (c[i] == 0)
+ 	return 0;
        c[i]->n_refs = i;
      }
  
Index: gcc.dg/sms-9.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/sms-9.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 sms-9.c
*** gcc.dg/sms-9.c	18 Apr 2012 17:11:48 -0000	1.1
--- gcc.dg/sms-9.c	3 Jun 2013 10:53:26 -0000
*************** main ()
*** 42,47 ****
--- 42,49 ----
  
    temp.begin = malloc (100 * sizeof (unsigned int));
    temp.count = malloc (100 * sizeof (unsigned int));
+   if (temp.begin == NULL || temp.count == NULL)
+     return 0;
  
    memset (temp.begin, 0, sizeof (unsigned int) * num);
    memset (temp.count, 0, sizeof (unsigned int) * num);
Index: gcc.dg/stack-usage-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/stack-usage-1.c,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 stack-usage-1.c
*** gcc.dg/stack-usage-1.c	2 May 2013 21:42:22 -0000	1.9
--- gcc.dg/stack-usage-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 68,73 ****
--- 68,75 ----
  #  define SIZE 248
  #elif defined (xstormy16)
  #  define SIZE 254
+ #elif defined (__MSP430__)
+ #  define SIZE 256
  #else
  #  define SIZE 256
  #endif
Index: gcc.dg/stack-usage-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/stack-usage-2.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 stack-usage-2.c
*** gcc.dg/stack-usage-2.c	18 Apr 2012 17:11:48 -0000	1.1
--- gcc.dg/stack-usage-2.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* { dg-do compile } */
  /* { dg-options "-Wstack-usage=512" } */
+ /* { dg-skip-if "stack usage not supported" { rl78-*-* } "*" "" } */
  
  int foo1 (void)
  {
Index: gcc.dg/struct-by-value-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/struct-by-value-1.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 struct-by-value-1.c
*** gcc.dg/struct-by-value-1.c	27 Nov 2002 01:03:55 -0000	1.1
--- gcc.dg/struct-by-value-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* Test structure passing by value.  */
  /* { dg-do run } */
+ /* { dg-skip-if "too big for large memory model" { "msp430-*-*" } { "-mlarge" } { "" } } */
  /* { dg-options "-O2" } */
  
  #define T(N)					\
Index: gcc.dg/transparent-union-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/transparent-union-1.c,v
retrieving revision 1.4
diff -u -3 -p -c -p -r1.4 transparent-union-1.c
*** gcc.dg/transparent-union-1.c	25 Mar 2011 11:22:58 -0000	1.4
--- gcc.dg/transparent-union-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR c/20043 */
  /* { dg-do compile } */
+ /* { dg-skip-if "pointers are not power-of-2 in size" { "msp430-*-*" } { "-mlarge" } { "" } } */
  /* { dg-options "-std=gnu99" } */
  
  extern void f0 (int *);
Index: gcc.dg/transparent-union-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/transparent-union-2.c,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 transparent-union-2.c
*** gcc.dg/transparent-union-2.c	25 Mar 2011 11:22:58 -0000	1.3
--- gcc.dg/transparent-union-2.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR c/20043 */
  /* { dg-do compile } */
+ /* { dg-skip-if "pointers are not power-of-2 in size" { "msp430-*-*" } { "-mlarge" } { "" } } */
  /* { dg-options "-std=gnu99" } */
  
  typedef union { int *i; long *l; } U
Index: gcc.dg/transparent-union-4.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/transparent-union-4.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 transparent-union-4.c
*** gcc.dg/transparent-union-4.c	19 Dec 2005 14:57:12 -0000	1.1
--- gcc.dg/transparent-union-4.c	3 Jun 2013 10:53:26 -0000
***************
*** 2,7 ****
--- 2,8 ----
     -pedantic.  Bug 22240.  */
  /* Origin: Joseph Myers <joseph@codesourcery.com> */
  /* { dg-do compile } */
+ /* { dg-skip-if "pointers are not power-of-2 in size" { "msp430-*-*" } { "-mlarge" } { "" } } */
  /* { dg-options "-pedantic" } */
  
  typedef union { union w *u; int *i; } H __attribute__ ((transparent_union));
Index: gcc.dg/transparent-union-5.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/transparent-union-5.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 transparent-union-5.c
*** gcc.dg/transparent-union-5.c	19 Dec 2005 14:57:12 -0000	1.1
--- gcc.dg/transparent-union-5.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR 24255 */
  /* { dg-do run } */
+ /* { dg-skip-if "pointers are not power-of-2 in size" { "msp430-*-*" } { "-mlarge" } { "" } } */
  /* { dg-options "-O" } */
  
  extern void abort (void);
Index: gcc.dg/unroll_1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/unroll_1.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 unroll_1.c
*** gcc.dg/unroll_1.c	2 May 2013 21:42:25 -0000	1.2
--- gcc.dg/unroll_1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-skip-if "test too big for the large memory model" { "msp430-*-*" } { "-mlarge" } { "" } } */
  /* { dg-options "-O2 -fdump-rtl-loop2_unroll -fno-peel-loops -fdisable-tree-cunroll -fdisable-tree-cunrolli -fenable-rtl-loop2_unroll" } */
  
  unsigned a[100], b[100];
Index: gcc.dg/unwind-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/unwind-1.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 unwind-1.c
*** gcc.dg/unwind-1.c	10 Mar 2008 12:31:11 -0000	1.1
--- gcc.dg/unwind-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do assemble { target { ! { powerpc-ibm-aix* } } } } */
+ /* { dg-skip-if "bogus test" { *-*-* } { "*" } { "" } } */
  /* { dg-options "-fleading-underscore -funwind-tables" } */
  
  void func(void) __asm("_func");
Index: gcc.dg/utf-cvt.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/utf-cvt.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 utf-cvt.c
*** gcc.dg/utf-cvt.c	2 May 2013 21:42:25 -0000	1.8
--- gcc.dg/utf-cvt.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,6 ****
--- 1,7 ----
  /* Contributed by Kris Van Hees <kris.van.hees@oracle.com> */
  /* Test the char16_t and char32_t promotion rules. */
  /* { dg-do compile } */
+ /* { dg-require-effective-target ilp32 } */
  /* { dg-excess-errors "short and int are 16bit" { target { "avr-*-*" } } } */
  /* { dg-options "-std=gnu99 -Wall -Wconversion -Wsign-conversion" } */
  
Index: gcc.dg/wtr-conversion-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/wtr-conversion-1.c,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 wtr-conversion-1.c
*** gcc.dg/wtr-conversion-1.c	2 May 2013 21:42:26 -0000	1.11
--- gcc.dg/wtr-conversion-1.c	3 Jun 2013 10:53:26 -0000
***************
*** 3,8 ****
--- 3,9 ----
     By Kaveh R. Ghazi <ghazi@caip.rutgers.edu> 4/09/2001.  */
  /* { dg-do compile } */
  /* { dg-options "-Wtraditional" } */
+ /* { dg-options "-m64bit-doubles -Wtraditional" { target rx-*-* } } */
  
  extern void foo_i (int);
  extern void foo_f (float);
Index: gcc.dg/compat/compat.exp
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/compat/compat.exp,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 compat.exp
*** gcc.dg/compat/compat.exp	2 May 2013 21:42:29 -0000	1.7
--- gcc.dg/compat/compat.exp	3 Jun 2013 10:53:26 -0000
*************** if [info exists ALT_CC_UNDER_TEST] then 
*** 68,73 ****
--- 68,76 ----
      if [string match "same" $ALT_CC_UNDER_TEST] then {
  	set compat_same_alt 1
      }
+ # If there is no alternative compiler to test, then skip this section.
+ } else {
+     return
  }
  
  compat_setup_dfp
Index: gcc.dg/compat/struct-layout-1.exp
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/compat/struct-layout-1.exp,v
retrieving revision 1.14
diff -u -3 -p -c -p -r1.14 struct-layout-1.exp
*** gcc.dg/compat/struct-layout-1.exp	2 May 2013 21:42:29 -0000	1.14
--- gcc.dg/compat/struct-layout-1.exp	3 Jun 2013 10:53:26 -0000
*************** if [info exists ALT_CC_UNDER_TEST] then 
*** 73,78 ****
--- 73,81 ----
      if [string match "same" $ALT_CC_UNDER_TEST] then {
  	set compat_same_alt 1
      }
+ # If there is no alternative compiler to test, then skip this section.
+ } else {
+     return
  }
  
  compat_setup_dfp
Index: gcc.dg/compat/struct-layout-1_generate.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/compat/struct-layout-1_generate.c,v
retrieving revision 1.12
diff -u -3 -p -c -p -r1.12 struct-layout-1_generate.c
*** gcc.dg/compat/struct-layout-1_generate.c	2 May 2013 21:42:29 -0000	1.12
--- gcc.dg/compat/struct-layout-1_generate.c	3 Jun 2013 10:53:26 -0000
*************** const char *dg_options[] = {
*** 50,55 ****
--- 50,56 ----
  "/* { dg-options \"%s-I%s -fno-common\" { target hppa*-*-hpux* powerpc*-*-darwin* } } */\n",
  "/* { dg-options \"%s-I%s -mno-mmx -fno-common -Wno-abi\" { target i?86-*-darwin* x86_64-*-darwin* } } */\n",
  "/* { dg-options \"%s-I%s -mno-base-addresses\" { target mmix-*-* } } */\n",
+ "/* { dg-options \"%s-I%s -m64bit-doubles\" { target rx-*-* } } */\n",
  "/* { dg-options \"%s-I%s -mlongcalls -mtext-section-literals\" { target xtensa*-*-* } } */\n"
  #define NDG_OPTIONS (sizeof (dg_options) / sizeof (dg_options[0]))
  };
Index: gcc.dg/compat/struct-layout-1_main.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/compat/struct-layout-1_main.c,v
retrieving revision 1.4
diff -u -3 -p -c -p -r1.4 struct-layout-1_main.c
*** gcc.dg/compat/struct-layout-1_main.c	23 Mar 2009 11:50:04 -0000	1.4
--- gcc.dg/compat/struct-layout-1_main.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,3 ****
--- 1,4 ----
+ /* { dg-options "-m64bit-doubles" { target rx-*-* } } */
  /* { dg-prune-output ".*-Wno-abi.*" } */
  
  #include "struct-layout-1.h"
Index: gcc.dg/compat/vector-1_x.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/compat/vector-1_x.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 vector-1_x.c
*** gcc.dg/compat/vector-1_x.c	25 Mar 2011 11:23:03 -0000	1.8
--- gcc.dg/compat/vector-1_x.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* { dg-options "-w" } */
  /* { dg-options "-w -Wno-psabi" { target { i?86-*-* x86_64-*-* } } } */
+ /* { dg-options "-m64bit-doubles -w" { target rx-*-* } } */
  
  #ifndef SKIP_ATTRIBUTE
  
Index: gcc.dg/compat/vector-1_y.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/compat/vector-1_y.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 vector-1_y.c
*** gcc.dg/compat/vector-1_y.c	25 Mar 2011 11:23:03 -0000	1.8
--- gcc.dg/compat/vector-1_y.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* { dg-options "-w" } */
  /* { dg-options "-w -Wno-psabi" { target { i?86-*-* x86_64-*-* } } } */
+ /* { dg-options "-m64bit-doubles -w" { target rx-*-* } } */
  
  #ifndef SKIP_ATTRIBUTE
  
Index: gcc.dg/compat/vector-2_x.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/compat/vector-2_x.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 vector-2_x.c
*** gcc.dg/compat/vector-2_x.c	25 Mar 2011 11:23:03 -0000	1.8
--- gcc.dg/compat/vector-2_x.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,7 ****
  /* { dg-options "-w" } */
  /* { dg-options "-w -mno-mmx -Wno-psabi" { target { i?86-*-* x86_64-*-* } } } */
  
- 
  #ifndef SKIP_ATTRIBUTE
  
  #include "compat-common.h"
--- 1,7 ----
  /* { dg-options "-w" } */
+ /* { dg-options "-m64bit-doubles -w" { target rx-*-* } } */
  /* { dg-options "-w -mno-mmx -Wno-psabi" { target { i?86-*-* x86_64-*-* } } } */
  
  #ifndef SKIP_ATTRIBUTE
  
  #include "compat-common.h"
Index: gcc.dg/compat/vector-2_y.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/compat/vector-2_y.c,v
retrieving revision 1.8
diff -u -3 -p -c -p -r1.8 vector-2_y.c
*** gcc.dg/compat/vector-2_y.c	25 Mar 2011 11:23:03 -0000	1.8
--- gcc.dg/compat/vector-2_y.c	3 Jun 2013 10:53:26 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* { dg-options "-w" } */
  /* { dg-options "-w -mno-mmx -Wno-psabi" { target { i?86-*-* x86_64-*-* } } } */
+ /* { dg-options "-m64bit-doubles -w" { target rx-*-* } } */
  
  #ifndef SKIP_ATTRIBUTE
  
Index: gcc.dg/compat/vector-defs.h
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/compat/vector-defs.h,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 vector-defs.h
*** gcc.dg/compat/vector-defs.h	18 Mar 2009 17:14:53 -0000	1.5
--- gcc.dg/compat/vector-defs.h	3 Jun 2013 10:53:26 -0000
*************** typedef sf __attribute__((vector_size (8
*** 31,37 ****
--- 31,41 ----
  typedef sf __attribute__((vector_size (16))) v4sf;
  typedef sf __attribute__((vector_size (64))) v16sf;
  
+ #if __SIZEOF_DOUBLE__ >= 8
  typedef df __attribute__((vector_size (16))) v2df;
+ #else
+ typedef sf __attribute__((vector_size (16))) v2df;
+ #endif
  
  #else
  
*************** typedef union U2SF { v2sf v; sf a[2]; } 
*** 87,90 ****
--- 91,98 ----
  typedef union U4SF { v4sf v; sf a[4]; } u4sf;
  typedef union U16SF { v16sf v; sf a[16]; } u16sf;
  
+ #if __SIZEOF_DOUBLE__ >= 8
  typedef union U2DF { v2df v; df a[2]; } u2df;
+ #else
+ typedef union U2DF { v2df v; sf a[2]; } u2df;
+ #endif
Index: gcc.dg/cpp/_Pragma6.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/cpp/_Pragma6.c,v
retrieving revision 1.20
diff -u -3 -p -c -p -r1.20 _Pragma6.c
*** gcc.dg/cpp/_Pragma6.c	18 Apr 2012 17:11:55 -0000	1.20
--- gcc.dg/cpp/_Pragma6.c	3 Jun 2013 10:53:26 -0000
***************
*** 2,7 ****
--- 2,8 ----
  /* This is supposed to succeed only if
     the target doesn't define HANDLE_PRAGMA_PACK_WITH_EXPANSION.  */
  /* { dg-do compile { target { ! { *-*-solaris2* } } } } */
+ /* { dg-skip-if "Not supported on XStormy16" { "xstormy16-*-*" } { "*" } { "" } } */
  
  #define push bar
  #define foo _Pragma ("pack(push)")
Index: gcc.dg/graphite/pr42205-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/graphite/pr42205-1.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 pr42205-1.c
*** gcc.dg/graphite/pr42205-1.c	2 May 2013 21:42:40 -0000	1.7
--- gcc.dg/graphite/pr42205-1.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,3 ****
--- 1,4 ----
+ /* { dg-require-effective-target ilp32 } */
  /* { dg-options "-O1 -ffast-math -floop-interchange" } */
  
  int adler32(int adler, char *buf, int n)
Index: gcc.dg/graphite/pr42221.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/graphite/pr42221.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 pr42221.c
*** gcc.dg/graphite/pr42221.c	2 May 2013 21:42:40 -0000	1.7
--- gcc.dg/graphite/pr42221.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,3 ****
--- 1,4 ----
+ /* { dg-require-effective-target ilp32 } */
  /* { dg-options "-Os -fgraphite-identity" } */
  
  static void b2w(unsigned int *out, const unsigned char *in, unsigned int len)
Index: gcc.dg/graphite/pr46966.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/graphite/pr46966.c,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 pr46966.c
*** gcc.dg/graphite/pr46966.c	2 May 2013 21:42:41 -0000	1.5
--- gcc.dg/graphite/pr46966.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR tree-optimization/46966 */
  /* { dg-do compile } */
+ /* { dg-require-effective-target ilp32 } */
  /* { dg-options "-O -floop-interchange -ffast-math -fno-tree-copy-prop -fno-tree-loop-im" } */
  
  int a[1000][1000];
Index: gcc.dg/graphite/scop-22.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/graphite/scop-22.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 scop-22.c
*** gcc.dg/graphite/scop-22.c	2 May 2013 21:42:41 -0000	1.7
--- gcc.dg/graphite/scop-22.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,3 ****
--- 1,5 ----
+ /* { dg-require-effective-target ilp32 } */
+ 
  double u[1782225];
  
  void foo(int N, int *res)
Index: gcc.dg/graphite/scop-dsyr2k.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/graphite/scop-dsyr2k.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 scop-dsyr2k.c
*** gcc.dg/graphite/scop-dsyr2k.c	2 May 2013 21:42:41 -0000	1.7
--- gcc.dg/graphite/scop-dsyr2k.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,3 ****
--- 1,5 ----
+ /* { dg-require-effective-target ilp32 } */
+ 
  #define NMAX 3000
  
  static double a[NMAX][NMAX], b[NMAX][NMAX], c[NMAX][NMAX];
Index: gcc.dg/graphite/scop-dsyrk.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/graphite/scop-dsyrk.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 scop-dsyrk.c
*** gcc.dg/graphite/scop-dsyrk.c	2 May 2013 21:42:41 -0000	1.7
--- gcc.dg/graphite/scop-dsyrk.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,3 ****
--- 1,5 ----
+ /* { dg-require-effective-target ilp32 } */
+ 
  #define NMAX 3000
  #define MEASURE_TIME 1
  
Index: gcc.dg/graphite/scop-mvt.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/graphite/scop-mvt.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 scop-mvt.c
*** gcc.dg/graphite/scop-mvt.c	2 May 2013 21:42:41 -0000	1.7
--- gcc.dg/graphite/scop-mvt.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,3 ****
--- 1,5 ----
+ /* { dg-require-effective-target ilp32 } */
+ 
  #define NMAX 2000
  
  static double x1[NMAX], x2[NMAX], a[NMAX][NMAX], y_1[NMAX], y_2[NMAX];
Index: gcc.dg/graphite/scop-sor.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/graphite/scop-sor.c,v
retrieving revision 1.7
diff -u -3 -p -c -p -r1.7 scop-sor.c
*** gcc.dg/graphite/scop-sor.c	2 May 2013 21:42:41 -0000	1.7
--- gcc.dg/graphite/scop-sor.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,3 ****
--- 1,5 ----
+ /* { dg-require-effective-target ilp32 } */
+ 
  #define SIZE 10000
  
  static double P[SIZE][SIZE];
Index: gcc.dg/lto/20081210-1_0.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/lto/20081210-1_0.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 20081210-1_0.c
*** gcc.dg/lto/20081210-1_0.c	12 Feb 2010 10:37:04 -0000	1.1
--- gcc.dg/lto/20081210-1_0.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,3 ****
--- 1,5 ----
+ /* { dg-lto-options {{-Wno-pointer-to-int-cast}} } */
+ 
  #if defined(_LP64)
  typedef unsigned long int uintptr_t;
  #elif defined (_WIN64)
Index: gcc.dg/lto/20091013-1_0.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/lto/20091013-1_0.c,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 20091013-1_0.c
*** gcc.dg/lto/20091013-1_0.c	18 Apr 2012 17:12:06 -0000	1.5
--- gcc.dg/lto/20091013-1_0.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,6 ****
--- 1,7 ----
  /* { dg-lto-do link } */
  /* { dg-require-effective-target fpic } */
  /* { dg-lto-options {{-fPIC -r -nostdlib -flto} {-fPIC -r -nostdlib -O2 -flto}} } */
+ /* { dg-skip-if "tries to convert long to pointer" { msp430-*-* rl78-*-* } "*" "" } */
  
  void * HeapAlloc(void*,unsigned int,unsigned long);
  
Index: gcc.dg/torture/fp-int-convert-double.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/fp-int-convert-double.c,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 fp-int-convert-double.c
*** gcc.dg/torture/fp-int-convert-double.c	2 May 2013 21:43:08 -0000	1.10
--- gcc.dg/torture/fp-int-convert-double.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,6 ****
  /* Test floating-point conversions.  Standard types and double.  */
  /* Origin: Joseph Myers <joseph@codesourcery.com> */
! /* { dg-do run } */
  /* { dg-options "" } */
  
  #include <float.h>
--- 1,7 ----
  /* Test floating-point conversions.  Standard types and double.  */
  /* Origin: Joseph Myers <joseph@codesourcery.com> */
! /* { dg-do run { xfail rx-*-* } } */
! /* { dg-skip-if "test too big for msp430" { msp430*-*-* } "*" "" } */
  /* { dg-options "" } */
  
  #include <float.h>
Index: gcc.dg/torture/fp-int-convert-float.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/fp-int-convert-float.c,v
retrieving revision 1.11
diff -u -3 -p -c -p -r1.11 fp-int-convert-float.c
*** gcc.dg/torture/fp-int-convert-float.c	2 May 2013 21:43:08 -0000	1.11
--- gcc.dg/torture/fp-int-convert-float.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,6 ****
  /* Test floating-point conversions.  Standard types and float.  */
  /* Origin: Joseph Myers <joseph@codesourcery.com> */
! /* { dg-do run } */
  /* { dg-options "" } */
  
  #include <float.h>
--- 1,7 ----
  /* Test floating-point conversions.  Standard types and float.  */
  /* Origin: Joseph Myers <joseph@codesourcery.com> */
! /* { dg-do run { xfail rx-*-* } } */
! /* { dg-skip-if "test too big for msp430" { msp430*-*-* } "*" "" } */
  /* { dg-options "" } */
  
  #include <float.h>
Index: gcc.dg/torture/fp-int-convert-long-double.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/fp-int-convert-long-double.c,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 fp-int-convert-long-double.c
*** gcc.dg/torture/fp-int-convert-long-double.c	2 May 2013 21:43:08 -0000	1.10
--- gcc.dg/torture/fp-int-convert-long-double.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,6 ****
  /* Test floating-point conversions.  Standard types and long double.  */
  /* Origin: Joseph Myers <joseph@codesourcery.com> */
! /* { dg-do run } */
  /* { dg-options "" } */
  
  #include <float.h>
--- 1,7 ----
  /* Test floating-point conversions.  Standard types and long double.  */
  /* Origin: Joseph Myers <joseph@codesourcery.com> */
! /* { dg-do run { xfail rx-*-* } } */
! /* { dg-skip-if "test too big for msp430" { msp430*-*-* } "*" "" } */
  /* { dg-options "" } */
  
  #include <float.h>
Index: gcc.dg/torture/fp-int-convert-timode.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/fp-int-convert-timode.c,v
retrieving revision 1.10
diff -u -3 -p -c -p -r1.10 fp-int-convert-timode.c
*** gcc.dg/torture/fp-int-convert-timode.c	2 May 2013 21:43:08 -0000	1.10
--- gcc.dg/torture/fp-int-convert-timode.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,6 ****
  /* Test floating-point conversions.  TImode types.  */
  /* Origin: Joseph Myers <joseph@codesourcery.com> */
! /* { dg-do run } */
  /* { dg-options "" } */
  
  #include <float.h>
--- 1,7 ----
  /* Test floating-point conversions.  TImode types.  */
  /* Origin: Joseph Myers <joseph@codesourcery.com> */
! /* { dg-do run { xfail rx-*-* } } */
! /* { dg-skip-if "test too big for msp430" { msp430*-*-* } "*" "" } */
  /* { dg-options "" } */
  
  #include <float.h>
Index: gcc.dg/torture/ipa-pta-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/ipa-pta-1.c,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 ipa-pta-1.c
*** gcc.dg/torture/ipa-pta-1.c	18 Apr 2012 17:12:18 -0000	1.5
--- gcc.dg/torture/ipa-pta-1.c	3 Jun 2013 10:53:27 -0000
*************** void test4 (int a4, char b, char c, char
*** 42,46 ****
--- 42,50 ----
    bar (p);
  }
  
+ // MSP430 puts the funtion address into a register so it does not appear
+ // repeated (as much as expected) in the assembler.
+ // { dg-final { global target_triplet } }
+ // { dg-final { if [string match msp430-*-* $target_triplet ] {return} } }
  /* { dg-final { scan-ipa-dump "bar.arg0 = { test4.arg0 test3.arg0 test2.arg0 test1.arg0 }" "pta" } } */
  /* { dg-final { cleanup-ipa-dump "pta" } } */
Index: gcc.dg/torture/matrix-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/matrix-1.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 matrix-1.c
*** gcc.dg/torture/matrix-1.c	2 May 2013 21:43:08 -0000	1.1
--- gcc.dg/torture/matrix-1.c	3 Jun 2013 10:53:27 -0000
*************** mem_init (void)
*** 56,67 ****
--- 56,74 ----
   
    d = 0;
    vel = (int ***) malloc (ARCHnodes * sizeof (int **));
+   if (vel == (int ***) NULL)
+     {
+       fprintf (stderr, "malloc failed for vel\n");
+       fflush (stderr);
+       exit (0);
+     }
  
    for (i = 0; i < ARCHnodes; i++)
      {
        vel[i] = (int **) malloc (3 * sizeof (int *));
        if (vel[i] == (int **) NULL)
  	{
+ 	  free (vel);
  	  fprintf (stderr, "malloc failed for vel[%d]\n", i);
  	  fflush (stderr);
  	  exit (0);
*************** mem_init (void)
*** 72,77 ****
--- 79,90 ----
        for (j = 0; j < 3; j++)
  	{
  	  vel[i][j] = (int *) malloc (ARCHnodes1 * sizeof (int));
+ 	  if (vel[i][j] == (int *) NULL)
+ 	    {
+ 	      free (vel[i]);
+ 	      fflush (stderr);
+ 	      exit (0);
+ 	    }
  	}
      }
    for (i = 0; i < ARCHnodes; i++)
Index: gcc.dg/torture/pr25654.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/pr25654.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr25654.c
*** gcc.dg/torture/pr25654.c	24 Jan 2006 12:10:28 -0000	1.1
--- gcc.dg/torture/pr25654.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-skip-if "asms do not work this way" { msp430*-*-* } "*" "" } */
  
  extern void abort (void) __attribute__((noreturn));
  
Index: gcc.dg/torture/pr29119.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/pr29119.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr29119.c
*** gcc.dg/torture/pr29119.c	30 Oct 2006 17:15:38 -0000	1.1
--- gcc.dg/torture/pr29119.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  
  void ldt_add_entry(void)
  {
Index: gcc.dg/torture/pr37868.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/pr37868.c,v
retrieving revision 1.6
diff -u -3 -p -c -p -r1.6 pr37868.c
*** gcc.dg/torture/pr37868.c	2 May 2013 21:43:10 -0000	1.6
--- gcc.dg/torture/pr37868.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,6 ****
  /* { dg-do run } */
  /* { dg-options "-fno-strict-aliasing" } */
! /* { dg-skip-if "unaligned access" { sparc*-*-* sh*-*-* tic6x-*-* } "*" "" } */
  
  extern void abort (void);
  #if (__SIZEOF_INT__ <= 2)
--- 1,6 ----
  /* { dg-do run } */
  /* { dg-options "-fno-strict-aliasing" } */
! /* { dg-skip-if "unaligned access" { rl78-*-* sparc*-*-* sh*-*-* tic6x-*-* } "*" "" } */
  
  extern void abort (void);
  #if (__SIZEOF_INT__ <= 2)
Index: gcc.dg/torture/pr41094.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/pr41094.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr41094.c
*** gcc.dg/torture/pr41094.c	1 Sep 2009 10:23:18 -0000	1.1
--- gcc.dg/torture/pr41094.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target large_double } */
  /* { dg-options "-ffast-math" } */
  
  #include <math.h>
Index: gcc.dg/torture/pr51071-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/pr51071-2.c,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 pr51071-2.c
*** gcc.dg/torture/pr51071-2.c	2 May 2013 21:43:10 -0000	1.3
--- gcc.dg/torture/pr51071-2.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,5 ****
  /* { dg-do compile } */
! /* { dg-options "-fno-delete-null-pointer-checks" } */
  
  __extension__ typedef __UINTPTR_TYPE__ uintptr_t;
  
--- 1,5 ----
  /* { dg-do compile } */
! /* { dg-options "-fno-delete-null-pointer-checks -Wno-pointer-to-int-cast" } */
  
  __extension__ typedef __UINTPTR_TYPE__ uintptr_t;
  
*************** static inline void
*** 8,40 ****
  trace_module_get  (struct module *mod, uintptr_t ip) { }
  struct module;
  static inline __attribute__((no_instrument_function))
! int try_module_get(struct module *module)
  {
    int ret = 1;
    if (module)
      {
!       if (module_is_live(module))
  	{
  	  __label__ __here;
  	  asm("");
  	  __here:
! 	  trace_module_get(module, (uintptr_t)&&__here);
  	}
        else
  	ret = 0;
      }
    return ret;
  }
  struct net_device;
! struct net_device_ops {
      int (*ndo_open)(struct net_device *dev);
  };
! int t3e3_open(struct net_device *dev)
  {
    int ret = hdlc_open(dev);
    if (ret)
      return ret;
!   try_module_get((&__this_module));
    return 0;
  }
  const struct net_device_ops t3e3_ops = { .ndo_open = t3e3_open };
--- 8,50 ----
  trace_module_get  (struct module *mod, uintptr_t ip) { }
  struct module;
  static inline __attribute__((no_instrument_function))
! 
! int
! try_module_get (struct module *module)
  {
    int ret = 1;
+ 
    if (module)
      {
!       if (module_is_live (module))
  	{
  	  __label__ __here;
  	  asm("");
  	  __here:
! 	  trace_module_get (module, (uintptr_t) && __here);
  	}
        else
  	ret = 0;
      }
    return ret;
  }
+ 
  struct net_device;
! 
! struct net_device_ops
! {
      int (*ndo_open)(struct net_device *dev);
  };
! 
! int
! t3e3_open (struct net_device *dev)
  {
    int ret = hdlc_open(dev);
+ 
    if (ret)
      return ret;
!   try_module_get ((& __this_module));
    return 0;
  }
+ 
  const struct net_device_ops t3e3_ops = { .ndo_open = t3e3_open };
Index: gcc.dg/torture/pr53366-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/pr53366-1.c,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 pr53366-1.c
*** gcc.dg/torture/pr53366-1.c	2 May 2013 21:43:12 -0000	1.3
--- gcc.dg/torture/pr53366-1.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR tree-optimization/53366 */
  /* { dg-do run } */
+ /* { dg-skip-if "test too big for msp430" { msp430*-*-* } "*" "" } */
  
  extern void abort (void);
  
Index: gcc.dg/torture/pr8081.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/pr8081.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr8081.c
*** gcc.dg/torture/pr8081.c	18 Apr 2012 17:12:25 -0000	1.1
--- gcc.dg/torture/pr8081.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target trampolines } */
  
  extern void abort (void);
  int
Index: gcc.dg/torture/type-generic-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/type-generic-1.c,v
retrieving revision 1.9
diff -u -3 -p -c -p -r1.9 type-generic-1.c
*** gcc.dg/torture/type-generic-1.c	18 Apr 2012 17:12:26 -0000	1.9
--- gcc.dg/torture/type-generic-1.c	3 Jun 2013 10:53:27 -0000
***************
*** 5,10 ****
--- 5,11 ----
  /* { dg-skip-if "No Inf/NaN support" { spu-*-* } } */
  /* { dg-options "-DUNSAFE" { target tic6x*-*-* } } */
  /* { dg-add-options ieee } */
+ /* { dg-xfail-run-if "default RX FP support is not IEEE compliant" { rx-*-* } { "*" } { "-m64bit-doubles" } } */
  
  #include "../tg-tests.h"
  
Index: gcc.dg/torture/vec-cvt-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/vec-cvt-1.c,v
retrieving revision 1.6
diff -u -3 -p -c -p -r1.6 vec-cvt-1.c
*** gcc.dg/torture/vec-cvt-1.c	2 May 2013 21:43:25 -0000	1.6
--- gcc.dg/torture/vec-cvt-1.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-skip-if "test too big for the msp430" { msp430*-*-* } "*" "" } */
  
  #include <stdlib.h>
  
Index: gcc.dg/torture/stackalign/builtin-apply-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/stackalign/builtin-apply-2.c,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 builtin-apply-2.c
*** gcc.dg/torture/stackalign/builtin-apply-2.c	2 May 2013 21:43:26 -0000	1.5
--- gcc.dg/torture/stackalign/builtin-apply-2.c	3 Jun 2013 10:53:27 -0000
***************
*** 7,12 ****
--- 7,13 ----
  /* { dg-do run } */
  
  /* { dg-skip-if "Variadic funcs use Base AAPCS.  Normal funcs use VFP variant." { arm_hf_eabi } } */
+ /* { dg-skip-if "" { msp430-*-* } { "*" } { "" } } */
     
  
  #define INTEGER_ARG  5
Index: gcc.dg/torture/stackalign/nested-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/stackalign/nested-1.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 nested-1.c
*** gcc.dg/torture/stackalign/nested-1.c	25 Mar 2011 11:23:26 -0000	1.2
--- gcc.dg/torture/stackalign/nested-1.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target trampolines } */
  /* { dg-skip-if "Stack alignment is too small" { hppa*-*-hpux* } "*" "" } */
  
  #include "check.h"
Index: gcc.dg/torture/stackalign/nested-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/stackalign/nested-2.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 nested-2.c
*** gcc.dg/torture/stackalign/nested-2.c	25 Mar 2011 11:23:26 -0000	1.2
--- gcc.dg/torture/stackalign/nested-2.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target trampolines } */
  /* { dg-skip-if "Stack alignment is too small" { hppa*-*-hpux* } "*" "" } */
  
  #include "check.h"
Index: gcc.dg/torture/stackalign/nested-3.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/stackalign/nested-3.c,v
retrieving revision 1.2
diff -u -3 -p -c -p -r1.2 nested-3.c
*** gcc.dg/torture/stackalign/nested-3.c	25 Mar 2011 11:23:26 -0000	1.2
--- gcc.dg/torture/stackalign/nested-3.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target trampolines } */
  /* { dg-skip-if "Stack alignment is too small" { hppa*-*-hpux* } "*" "" } */
  
  #include "check.h"
Index: gcc.dg/torture/stackalign/non-local-goto-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/stackalign/non-local-goto-1.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 non-local-goto-1.c
*** gcc.dg/torture/stackalign/non-local-goto-1.c	18 Mar 2009 17:14:54 -0000	1.1
--- gcc.dg/torture/stackalign/non-local-goto-1.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target trampolines } */
  
  extern void abort (void);
  
Index: gcc.dg/torture/stackalign/non-local-goto-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/stackalign/non-local-goto-2.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 non-local-goto-2.c
*** gcc.dg/torture/stackalign/non-local-goto-2.c	18 Mar 2009 17:14:54 -0000	1.1
--- gcc.dg/torture/stackalign/non-local-goto-2.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target trampolines } */
  
  extern void abort (void);
  
Index: gcc.dg/torture/stackalign/non-local-goto-3.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/torture/stackalign/non-local-goto-3.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 non-local-goto-3.c
*** gcc.dg/torture/stackalign/non-local-goto-3.c	18 Mar 2009 17:14:54 -0000	1.1
--- gcc.dg/torture/stackalign/non-local-goto-3.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do run } */
+ /* { dg-require-effective-target trampolines } */
  
  #ifndef NO_TRAMPOLINES
  extern void abort (void);
Index: gcc.dg/tree-ssa/asm-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/asm-2.c,v
retrieving revision 1.3
diff -u -3 -p -c -p -r1.3 asm-2.c
*** gcc.dg/tree-ssa/asm-2.c	2 May 2013 21:43:29 -0000	1.3
--- gcc.dg/tree-ssa/asm-2.c	3 Jun 2013 10:53:27 -0000
***************
*** 3,8 ****
--- 3,10 ----
  
  #ifdef __hppa__
  #define REGISTER "1"
+ #elif defined __RL78__
+ #define REGISTER "r8"
  #else
  #ifdef __moxie__
  #define REGISTER "2"
Index: gcc.dg/tree-ssa/asm-3.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/asm-3.c,v
retrieving revision 1.4
diff -u -3 -p -c -p -r1.4 asm-3.c
*** gcc.dg/tree-ssa/asm-3.c	2 May 2013 21:43:29 -0000	1.4
--- gcc.dg/tree-ssa/asm-3.c	3 Jun 2013 10:53:27 -0000
***************
*** 4,9 ****
--- 4,13 ----
  
  #ifdef __hppa__
  #define REGISTER "1"
+ #elif defined __RL78__
+ #define REGISTER "r8"
+ #elif defined __MSP430__
+ #define REGISTER "R8"
  #else
  #ifdef __moxie__
  #define REGISTER "8"
Index: gcc.dg/tree-ssa/inline_asm-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/inline_asm-1.c,v
retrieving revision 1.4
diff -u -3 -p -c -p -r1.4 inline_asm-1.c
*** gcc.dg/tree-ssa/inline_asm-1.c	18 Mar 2009 17:14:54 -0000	1.4
--- gcc.dg/tree-ssa/inline_asm-1.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  /* { dg-options "-O1 -fdump-tree-optimized -fdump-tree-alias-vops" } */
  /* Test to make sure that inline-asm causes a VDEF and that we call test_function twice. */
  
Index: gcc.dg/tree-ssa/inline_asm-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/inline_asm-2.c,v
retrieving revision 1.4
diff -u -3 -p -c -p -r1.4 inline_asm-2.c
*** gcc.dg/tree-ssa/inline_asm-2.c	18 Mar 2009 17:14:54 -0000	1.4
--- gcc.dg/tree-ssa/inline_asm-2.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-skip-if "asm construct does not work with RL78" { rl78-*-* } { "*" } { "" } } */
  /* { dg-options "-O1 -fdump-tree-alias-vops" } */
  /* Test to make sure that inline-asm causes a VDEF. */
  
Index: gcc.dg/tree-ssa/loop-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/loop-1.c,v
retrieving revision 1.14
diff -u -3 -p -c -p -r1.14 loop-1.c
*** gcc.dg/tree-ssa/loop-1.c	2 May 2013 21:43:39 -0000	1.14
--- gcc.dg/tree-ssa/loop-1.c	3 Jun 2013 10:53:27 -0000
*************** int xxx(void)
*** 55,57 ****
--- 55,58 ----
  /* { dg-final { scan-assembler-times "jsr|bsrf|blink\ttr?,r18"  5 { target sh*-*-* } } } */
  /* { dg-final { scan-assembler-times "Jsr \\\$r" 5 { target cris-*-* } } } */
  /* { dg-final { scan-assembler-times "\[jb\]sr" 5 { target fido-*-* m68k-*-* } } } */
+ /* { dg-final { scan-assembler-times "jsr\tr" 5 { target rx-*-* } } } */
Index: gcc.dg/tree-ssa/pr54245.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/pr54245.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 pr54245.c
*** gcc.dg/tree-ssa/pr54245.c	2 May 2013 21:43:44 -0000	1.1
--- gcc.dg/tree-ssa/pr54245.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-O1 -fdump-tree-slsr-details" } */
  
  #include <stdio.h>
Index: gcc.dg/tree-ssa/scev-3.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/scev-3.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 scev-3.c
*** gcc.dg/tree-ssa/scev-3.c	2 May 2013 21:43:45 -0000	1.1
--- gcc.dg/tree-ssa/scev-3.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-O2 -fdump-tree-optimized" } */
  
  int *a_p;
Index: gcc.dg/tree-ssa/slsr-1.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/slsr-1.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 slsr-1.c
*** gcc.dg/tree-ssa/slsr-1.c	2 May 2013 21:43:46 -0000	1.1
--- gcc.dg/tree-ssa/slsr-1.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-O3 -fdump-tree-optimized" } */
  
  extern void foo (int);
Index: gcc.dg/tree-ssa/slsr-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/slsr-2.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 slsr-2.c
*** gcc.dg/tree-ssa/slsr-2.c	2 May 2013 21:43:49 -0000	1.1
--- gcc.dg/tree-ssa/slsr-2.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-O3 -fdump-tree-optimized" } */
  
  extern void foo (int);
Index: gcc.dg/tree-ssa/slsr-3.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/slsr-3.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 slsr-3.c
*** gcc.dg/tree-ssa/slsr-3.c	2 May 2013 21:43:51 -0000	1.1
--- gcc.dg/tree-ssa/slsr-3.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-O3 -fdump-tree-optimized" } */
  
  int
Index: gcc.dg/tree-ssa/sra-13.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/sra-13.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 sra-13.c
*** gcc.dg/tree-ssa/sra-13.c	2 May 2013 21:43:53 -0000	1.1
--- gcc.dg/tree-ssa/sra-13.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,6 ****
--- 1,7 ----
  /* Test that SRA replacement can deal with assignments that have
     sub-replacements on one side and a single scalar replacement on another.  */
  /* { dg-do run } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-O1" } */
  
  struct A
Index: gcc.dg/tree-ssa/vector-4.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/vector-4.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 vector-4.c
*** gcc.dg/tree-ssa/vector-4.c	2 May 2013 21:43:56 -0000	1.1
--- gcc.dg/tree-ssa/vector-4.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,6 ----
  /* { dg-do compile } */
+ /* On 16-bit targets vector expansion does not work in the way this test expects.  */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-w -O1 -fdump-tree-gimple" } */
  
  typedef int v4si __attribute__ ((vector_size (16)));
Index: gcc.dg/tree-ssa/vrp47.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/vrp47.c,v
retrieving revision 1.14
diff -u -3 -p -c -p -r1.14 vrp47.c
*** gcc.dg/tree-ssa/vrp47.c	2 May 2013 21:43:56 -0000	1.14
--- gcc.dg/tree-ssa/vrp47.c	3 Jun 2013 10:53:27 -0000
***************
*** 4,9 ****
--- 4,10 ----
     jumps when evaluating an && condition.  VRP is not able to optimize
     this.  */
  /* { dg-do compile { target { ! "mips*-*-* s390*-*-*  avr-*-* mn10300-*-*" } } } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-O2 -fdump-tree-vrp1 -fdump-tree-dom1 -fdump-tree-dom2" } */
  /* { dg-additional-options "-march=i586" { target { { i?86-*-* x86_64-*-* } && ia32 } } } */
  /* Skip on ARM Cortex-M0, where LOGICAL_OP_NON_SHORT_CIRCUIT is set to false,
Index: gcc.dg/tree-ssa/vrp58.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/vrp58.c,v
retrieving revision 1.5
diff -u -3 -p -c -p -r1.5 vrp58.c
*** gcc.dg/tree-ssa/vrp58.c	2 May 2013 21:43:56 -0000	1.5
--- gcc.dg/tree-ssa/vrp58.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
--- 1,5 ----
  /* { dg-do compile } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-O2 -fdump-tree-vrp1-details" } */
  
  long long
Index: gcc.dg/tree-ssa/vrp66.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/vrp66.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 vrp66.c
*** gcc.dg/tree-ssa/vrp66.c	2 May 2013 21:43:57 -0000	1.1
--- gcc.dg/tree-ssa/vrp66.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,5 ****
--- 1,6 ----
  /* PR tree-optimization/52267 */
  /* { dg-do run } */
+ /* { dg-require-effective-target int32plus } */
  /* { dg-options "-O2" } */
  
  extern void abort (void);
Index: gcc.dg/tree-ssa/vrp72.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/vrp72.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 vrp72.c
*** gcc.dg/tree-ssa/vrp72.c	2 May 2013 21:43:58 -0000	1.1
--- gcc.dg/tree-ssa/vrp72.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
! /* { dg-options "-O2" } */
  
  typedef __INTPTR_TYPE__ intptr_t;
  typedef unsigned long long uint64_t;
--- 1,4 ----
! /* { dg-options "-O2 -Wno-int-to-pointer" } */
  
  typedef __INTPTR_TYPE__ intptr_t;
  typedef unsigned long long uint64_t;
Index: gcc.dg/tree-ssa/vrp73.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/vrp73.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 vrp73.c
*** gcc.dg/tree-ssa/vrp73.c	2 May 2013 21:43:59 -0000	1.1
--- gcc.dg/tree-ssa/vrp73.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
! /* { dg-options "-O2" } */
  
  __extension__ typedef __INTPTR_TYPE__ intptr_t;
  
--- 1,4 ----
! /* { dg-options "-O2 -Wno-int-to-pointer" } */
  
  __extension__ typedef __INTPTR_TYPE__ intptr_t;
  
Index: gcc.dg/tree-ssa/vrp75.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/tree-ssa/vrp75.c,v
retrieving revision 1.1
diff -u -3 -p -c -p -r1.1 vrp75.c
*** gcc.dg/tree-ssa/vrp75.c	2 May 2013 21:43:59 -0000	1.1
--- gcc.dg/tree-ssa/vrp75.c	3 Jun 2013 10:53:27 -0000
***************
*** 1,4 ****
! /* { dg-options "-O2" } */
  
  __extension__ typedef __INTPTR_TYPE__ intptr_t;
  typedef unsigned long long uint64_t;
--- 1,4 ----
! /* { dg-options "-O2 -Wno-int-to-pointer" } */
  
  __extension__ typedef __INTPTR_TYPE__ intptr_t;
  typedef unsigned long long uint64_t;
Index: gcc.dg/weak/typeof-2.c
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/gcc.dg/weak/typeof-2.c,v
retrieving revision 1.13
diff -u -3 -p -c -p -r1.13 typeof-2.c
*** gcc.dg/weak/typeof-2.c	2 May 2013 21:44:11 -0000	1.13
--- gcc.dg/weak/typeof-2.c	3 Jun 2013 10:53:27 -0000
*************** int bar3 (int x)
*** 48,51 ****
--- 48,55 ----
  // { dg-final { if [string match m68k-*-* $target_triplet ] {return} } }
  // Likewise for moxie targets.
  // { dg-final { if [string match moxie-*-* $target_triplet ] {return} } }
+ // Likewise for RX targets.
+ // { dg-final { if [string match rx-*-* $target_triplet ] {return} } }
+ // Likewise for MSP430 targets.
+ // { dg-final { if [string match msp430-*-* $target_triplet ] {return} } }
  // { dg-final { scan-assembler "baz3.*baz3.*baz3.*baz3.*baz3.*baz3" } }
Index: gcc.c-torture/execute/20020412-1.x
===================================================================
RCS file: gcc.c-torture/execute/20020412-1.x
diff -N gcc.c-torture/execute/20020412-1.x
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gcc.c-torture/execute/20020412-1.x	3 Jun 2013 11:02:45 -0000
@@ -0,0 +1,15 @@
+if { [istarget "xstormy16-*-*"] } {
+    # This test will fail for any target which uses an upwards growing
+    # stack with downward growing args.  ie STACK_GROWS_DOWNWARD is
+    # not defined but ARGS_GROW_DOWNWARD is defined.  There is only
+    # one such target - the xstormy16.  The bug is in the generic code
+    # somewhere, probably calls.c.  What happens is that the two
+    # variable sized arrays - x and y - are assembled onto the stack
+    # in the wrong order.  Since this bug is for a GCC extension to C
+    # and since it only affects varargs handling and since it only
+    # affects the xstormy16, the test is XFAILed for now.
+    
+    set torture_execute_xfail [istarget]
+}
+
+return 0
Index: gcc.c-torture/execute/20061220-1.x
===================================================================
RCS file: gcc.c-torture/execute/20061220-1.x
diff -N gcc.c-torture/execute/20061220-1.x
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gcc.c-torture/execute/20061220-1.x	3 Jun 2013 11:02:45 -0000
@@ -0,0 +1,6 @@
+# asm statements for the RL78 have to be very carefully constructed. 
+if { [istarget "rl78-*-*"] } {
+        return 1;
+}
+
+return 0
Index: gcc.c-torture/execute/bitfld-3.x
===================================================================
RCS file: gcc.c-torture/execute/bitfld-3.x
diff -N gcc.c-torture/execute/bitfld-3.x
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gcc.c-torture/execute/bitfld-3.x	3 Jun 2013 11:02:45 -0000
@@ -0,0 +1,7 @@
+load_lib target-supports.exp
+
+if { [check_effective_target_int16] } {
+	return 1
+}
+
+return 0;
Index: gcc.c-torture/execute/ieee/fp-cmp-4.x
===================================================================
RCS file: gcc.c-torture/execute/ieee/fp-cmp-4.x
diff -N gcc.c-torture/execute/ieee/fp-cmp-4.x
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gcc.c-torture/execute/ieee/fp-cmp-4.x	3 Jun 2013 11:02:45 -0000
@@ -0,0 +1,13 @@
+if [istarget "rx-*-*"] {
+  set torture_eval_before_execute {
+    global compiler_conditional_xfail_data
+    set compiler_conditional_xfail_data {
+        "RX fp isnsn do not handle denorms" \
+        "rx-*-*" \
+        { "*" } \
+        { "-m64bit-doubles" }
+    }
+  }
+}
+
+return 0
Index: gcc.c-torture/execute/ieee/fp-cmp-4l.x
===================================================================
RCS file: gcc.c-torture/execute/ieee/fp-cmp-4l.x
diff -N gcc.c-torture/execute/ieee/fp-cmp-4l.x
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gcc.c-torture/execute/ieee/fp-cmp-4l.x	3 Jun 2013 11:02:45 -0000
@@ -0,0 +1,13 @@
+if [istarget "rx-*-*"] {
+  set torture_eval_before_execute {
+    global compiler_conditional_xfail_data
+    set compiler_conditional_xfail_data {
+        "RX fp isnsn do not handle denorms" \
+        "rx-*-*" \
+        { "*" } \
+        { "-m64bit-doubles" }
+    }
+  }
+}
+
+return 0
Index: gcc.c-torture/execute/ieee/fp-cmp-5.x
===================================================================
RCS file: gcc.c-torture/execute/ieee/fp-cmp-5.x
diff -N gcc.c-torture/execute/ieee/fp-cmp-5.x
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gcc.c-torture/execute/ieee/fp-cmp-5.x	3 Jun 2013 11:02:45 -0000
@@ -0,0 +1,13 @@
+if [istarget "rx-*-*"] {
+  set torture_eval_before_execute {
+    global compiler_conditional_xfail_data
+    set compiler_conditional_xfail_data {
+        "RX fp isnsn do not handle denorms" \
+        "rx-*-*" \
+        { "*" } \
+        { "-m64bit-doubles" }
+    }
+  }
+}
+
+return 0
Index: gcc.c-torture/execute/ieee/fp-cmp-8.x
===================================================================
RCS file: gcc.c-torture/execute/ieee/fp-cmp-8.x
diff -N gcc.c-torture/execute/ieee/fp-cmp-8.x
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gcc.c-torture/execute/ieee/fp-cmp-8.x	3 Jun 2013 11:02:45 -0000
@@ -0,0 +1,13 @@
+if [istarget "rx-*-*"] {
+  set torture_eval_before_execute {
+    global compiler_conditional_xfail_data
+    set compiler_conditional_xfail_data {
+        "RX fp isnsn do not handle denorms" \
+        "rx-*-*" \
+        { "*" } \
+        { "-m64bit-doubles" }
+    }
+  }
+}
+
+return 0
Index: gcc.c-torture/execute/ieee/fp-cmp-8l.x
===================================================================
RCS file: gcc.c-torture/execute/ieee/fp-cmp-8l.x
diff -N gcc.c-torture/execute/ieee/fp-cmp-8l.x
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gcc.c-torture/execute/ieee/fp-cmp-8l.x	3 Jun 2013 11:02:45 -0000
@@ -0,0 +1,13 @@
+if [istarget "rx-*-*"] {
+  set torture_eval_before_execute {
+    global compiler_conditional_xfail_data
+    set compiler_conditional_xfail_data {
+        "RX fp isnsn do not handle denorms" \
+        "rx-*-*" \
+        { "*" } \
+        { "-m64bit-doubles" }
+    }
+  }
+}
+
+return 0
