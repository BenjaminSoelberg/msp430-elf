Index: gcc/ChangeLog.RedHat
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/ChangeLog.RedHat,v
retrieving revision 1.445
diff -p -U 5 -r1.445  gcc/ChangeLog.RedHat
--- gcc/ChangeLog.RedHat	21 Aug 2013 09:56:17 -0000	1.445
+++ gcc/ChangeLog.RedHat	23 Aug 2013 01:44:42 -0000
@@ -1,5 +1,10 @@
+2013-08-22  DJ Delorie  <dj@redhat.com>
+
+	* config/rl78/rl78-expand.md (signbitsf2): New.
+	(signbitdf2): New.
+
 2013-08-21  Nick Clifton  <nickc@redhat.com>
 
 	* config/mips/mips.c (mips_file_start): Compute the value of the
 	.gcc_compiled_longXX section name from DWARF2_ADDR_SIZE.
 
Index: gcc/config/rl78/rl78-expand.md
===================================================================
RCS file: /cvs/cvsfiles/gnupro/gcc/config/rl78/rl78-expand.md,v
retrieving revision 1.4
diff -p -U 5 -r1.4  gcc/config/rl78/rl78-expand.md
--- gcc/config/rl78/rl78-expand.md	21 Jun 2013 10:30:18 -0000	1.4
+++ gcc/config/rl78/rl78-expand.md	23 Aug 2013 01:44:42 -0000
@@ -306,5 +306,35 @@
 	      (clobber (reg:HI AX_REG))
 	      ])]
   "1"
   "rl78_expand_compare (operands);"
 )
+
+;;---------- Builtins ------------------------
+
+(define_expand "signbitsf2"
+  [(use (match_operand:HI 0 "register_operand"))
+   (use (match_operand:SF 1 "register_operand"))]
+  ""
+{
+  rtx scratch = gen_reg_rtx (QImode);
+  rtx scratch2 = gen_reg_rtx (QImode);
+
+  emit_insn (gen_movqi (scratch, gen_rtx_SUBREG (QImode, operands[1], 3)));
+  emit_insn (gen_andqi3 (scratch2, scratch, GEN_INT (-127)));
+  emit_insn (gen_zero_extendqihi2 (operands[0], scratch2));
+  DONE;
+})
+
+(define_expand "signbitdf2"
+  [(use (match_operand:HI 0 "register_operand"))
+   (use (match_operand:DF 1 "register_operand"))]
+  ""
+{
+  rtx scratch = gen_reg_rtx (QImode);
+  rtx scratch2 = gen_reg_rtx (QImode);
+
+  emit_insn (gen_movqi (scratch, gen_rtx_SUBREG (QImode, operands[1], 7)));
+  emit_insn (gen_andqi3 (scratch2, scratch, GEN_INT (-127)));
+  emit_insn (gen_zero_extendqihi2 (operands[0], scratch2));
+  DONE;
+})
